<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Workflows for R coding | R for Environmental Chemists</title>
  <meta name="description" content="This is a proof-of-concept for a further full length textbook." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Workflows for R coding | R for Environmental Chemists" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://davidrosshall.github.io/R4EnvChem/" />
  
  <meta property="og:description" content="This is a proof-of-concept for a further full length textbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Workflows for R coding | R for Environmental Chemists" />
  
  <meta name="twitter:description" content="This is a proof-of-concept for a further full length textbook." />
  

<meta name="author" content="David Hall, Steven Kutarna, Kristen Yeh, Hui Peng and Jessica D’eon" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-coding-basics.html"/>
<link rel="next" href="using-r-markdown.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Environmental Chemistry</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#providing-feedback"><i class="fa fa-check"></i><b>0.1</b> Providing Feedback</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors"><i class="fa fa-check"></i>Authors</a></li>
</ul></li>
<li class="part"><span><b>Section 1: Getting Setup in R</b></span></li>
<li class="chapter" data-level="1" data-path="installing-r.html"><a href="installing-r.html"><i class="fa fa-check"></i><b>1</b> Installing R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r.html"><a href="installing-r.html#prerequisite-software"><i class="fa fa-check"></i><b>1.1</b> Prerequisite software</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="installing-r.html"><a href="installing-r.html#r"><i class="fa fa-check"></i><b>1.1.1</b> R</a></li>
<li class="chapter" data-level="1.1.2" data-path="installing-r.html"><a href="installing-r.html#downloading-rstudio-ide"><i class="fa fa-check"></i><b>1.1.2</b> Downloading RStudio IDE</a></li>
<li class="chapter" data-level="1.1.3" data-path="installing-r.html"><a href="installing-r.html#installing-packages"><i class="fa fa-check"></i><b>1.1.3</b> Installing packages</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="installing-r.html"><a href="installing-r.html#running-r-code"><i class="fa fa-check"></i><b>1.2</b> Running R Code</a></li>
<li class="chapter" data-level="1.3" data-path="installing-r.html"><a href="installing-r.html#customizing-rstudio"><i class="fa fa-check"></i><b>1.3</b> Customizing RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="installing-r.html"><a href="installing-r.html#where-to-get-help"><i class="fa fa-check"></i><b>1.4</b> Where to get help</a></li>
<li class="chapter" data-level="1.5" data-path="installing-r.html"><a href="installing-r.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-studio-projects.html"><a href="r-studio-projects.html"><i class="fa fa-check"></i><b>2</b> R Studio Projects</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-studio-projects.html"><a href="r-studio-projects.html#paths-and-directories"><i class="fa fa-check"></i><b>2.1</b> Paths and directories</a></li>
<li class="chapter" data-level="2.2" data-path="r-studio-projects.html"><a href="r-studio-projects.html#importing-a-project"><i class="fa fa-check"></i><b>2.2</b> Importing a project</a></li>
<li class="chapter" data-level="2.3" data-path="r-studio-projects.html"><a href="r-studio-projects.html#summary-1"><i class="fa fa-check"></i><b>2.3</b> Summary</a></li>
<li class="chapter" data-level="2.4" data-path="r-studio-projects.html"><a href="r-studio-projects.html#creating-an-rstudio-project"><i class="fa fa-check"></i><b>2.4</b> Creating an RStudio project</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-coding-basics.html"><a href="r-coding-basics.html"><i class="fa fa-check"></i><b>3</b> R coding basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-coding-basics.html"><a href="r-coding-basics.html#variables"><i class="fa fa-check"></i><b>3.1</b> Variables</a></li>
<li class="chapter" data-level="3.2" data-path="r-coding-basics.html"><a href="r-coding-basics.html#data-types"><i class="fa fa-check"></i><b>3.2</b> Data Types</a></li>
<li class="chapter" data-level="3.3" data-path="r-coding-basics.html"><a href="r-coding-basics.html#data-structures"><i class="fa fa-check"></i><b>3.3</b> Data Structures</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="r-coding-basics.html"><a href="r-coding-basics.html#accessing-data-in-subfolders"><i class="fa fa-check"></i><b>3.3.1</b> Accessing data in subfolders</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-coding-basics.html"><a href="r-coding-basics.html#other-data-structures"><i class="fa fa-check"></i><b>3.4</b> Other data structures</a></li>
<li class="chapter" data-level="3.5" data-path="r-coding-basics.html"><a href="r-coding-basics.html#r-packages-and-functions"><i class="fa fa-check"></i><b>3.5</b> R packages and functions</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="r-coding-basics.html"><a href="r-coding-basics.html#ggplot2"><i class="fa fa-check"></i><b>3.5.1</b> ggplot2</a></li>
<li class="chapter" data-level="3.5.2" data-path="r-coding-basics.html"><a href="r-coding-basics.html#calling-specific-functions"><i class="fa fa-check"></i><b>3.5.2</b> Calling specific functions</a></li>
<li class="chapter" data-level="3.5.3" data-path="r-coding-basics.html"><a href="r-coding-basics.html#function-documentation"><i class="fa fa-check"></i><b>3.5.3</b> Function Documentation</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="r-coding-basics.html"><a href="r-coding-basics.html#summary-2"><i class="fa fa-check"></i><b>3.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html"><i class="fa fa-check"></i><b>4</b> Workflows for R coding</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#creating-or-opening-a-script"><i class="fa fa-check"></i><b>4.1</b> Creating or opening a script</a></li>
<li class="chapter" data-level="4.2" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#workspace-and-whats-real"><i class="fa fa-check"></i><b>4.2</b> Workspace and what’s real</a></li>
<li class="chapter" data-level="4.3" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#saving-r-scripts"><i class="fa fa-check"></i><b>4.3</b> Saving R scripts</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#what-should-i-save"><i class="fa fa-check"></i><b>4.3.1</b> What should I save?</a></li>
<li class="chapter" data-level="4.3.2" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#saving-objects"><i class="fa fa-check"></i><b>4.3.2</b> Saving objects</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#script-formatting"><i class="fa fa-check"></i><b>4.4</b> Script formatting</a></li>
<li class="chapter" data-level="4.5" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#viewing-data-and-code-simultaneously"><i class="fa fa-check"></i><b>4.5</b> Viewing data and code simultaneously</a></li>
<li class="chapter" data-level="4.6" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#troubleshooting-error-messages"><i class="fa fa-check"></i><b>4.6</b> Troubleshooting error messages</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#script-diagnostics"><i class="fa fa-check"></i><b>4.6.1</b> Script diagnostics</a></li>
<li class="chapter" data-level="4.6.2" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#reading-error-codes"><i class="fa fa-check"></i><b>4.6.2</b> Reading error codes</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#summary-3"><i class="fa fa-check"></i><b>4.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="using-r-markdown.html"><a href="using-r-markdown.html"><i class="fa fa-check"></i><b>5</b> Using R Markdown</a>
<ul>
<li class="chapter" data-level="5.1" data-path="using-r-markdown.html"><a href="using-r-markdown.html#deeper-look-into-rmarkdown"><i class="fa fa-check"></i><b>5.1</b> Deeper look into rmarkdown</a></li>
<li class="chapter" data-level="5.2" data-path="using-r-markdown.html"><a href="using-r-markdown.html#getting-started-with-rmarkdown"><i class="fa fa-check"></i><b>5.2</b> Getting started with rmarkdown</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="using-r-markdown.html"><a href="using-r-markdown.html#understanding-rmarkdown"><i class="fa fa-check"></i><b>5.2.1</b> Understanding rmarkdown</a></li>
<li class="chapter" data-level="5.2.2" data-path="using-r-markdown.html"><a href="using-r-markdown.html#running-code-in-rmarkdown"><i class="fa fa-check"></i><b>5.2.2</b> Running code in rmarkdown</a></li>
<li class="chapter" data-level="5.2.3" data-path="using-r-markdown.html"><a href="using-r-markdown.html#generating-final-report"><i class="fa fa-check"></i><b>5.2.3</b> Generating final report</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="using-r-markdown.html"><a href="using-r-markdown.html#so-now-what-do-i-do-with-r-markdown"><i class="fa fa-check"></i><b>5.3</b> So now what do I do with R Markdown?</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="using-r-markdown.html"><a href="using-r-markdown.html#r-markdown-resources-and-further-reading"><i class="fa fa-check"></i><b>5.3.1</b> R Markdown resources and further reading</a></li>
<li class="chapter" data-level="5.3.2" data-path="using-r-markdown.html"><a href="using-r-markdown.html#r-code-chunk-options"><i class="fa fa-check"></i><b>5.3.2</b> R code chunk options</a></li>
<li class="chapter" data-level="5.3.3" data-path="using-r-markdown.html"><a href="using-r-markdown.html#inserting-images"><i class="fa fa-check"></i><b>5.3.3</b> Inserting images</a></li>
<li class="chapter" data-level="5.3.4" data-path="using-r-markdown.html"><a href="using-r-markdown.html#generating-tables"><i class="fa fa-check"></i><b>5.3.4</b> Generating Tables</a></li>
<li class="chapter" data-level="5.3.5" data-path="using-r-markdown.html"><a href="using-r-markdown.html#spellcheck-in-r-markdown"><i class="fa fa-check"></i><b>5.3.5</b> Spellcheck in R Markdown</a></li>
<li class="chapter" data-level="5.3.6" data-path="using-r-markdown.html"><a href="using-r-markdown.html#r-markdown-syntax"><i class="fa fa-check"></i><b>5.3.6</b> R markdown syntax</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="using-r-markdown.html"><a href="using-r-markdown.html#rstudio-tips-and-tricks"><i class="fa fa-check"></i><b>5.4</b> RStudio tips and tricks</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-tutorial-exercise.html"><a href="r-tutorial-exercise.html"><i class="fa fa-check"></i><b>6</b> R Tutorial Exercise</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-tutorial-exercise.html"><a href="r-tutorial-exercise.html#expected-outcome"><i class="fa fa-check"></i><b>6.1</b> Expected outcome</a></li>
</ul></li>
<li class="part"><span><b>Section 2: Data Analysis in R</b></span></li>
<li class="chapter" data-level="7" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html"><i class="fa fa-check"></i><b>7</b> Intro to Data Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#example-data"><i class="fa fa-check"></i><b>7.1</b> Example Data</a></li>
<li class="chapter" data-level="7.2" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#further-reading"><i class="fa fa-check"></i><b>7.2</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="importing-data-into-r.html"><a href="importing-data-into-r.html"><i class="fa fa-check"></i><b>8</b> Importing data into R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="importing-data-into-r.html"><a href="importing-data-into-r.html#how-data-is-stored"><i class="fa fa-check"></i><b>8.1</b> How data is stored</a></li>
<li class="chapter" data-level="8.2" data-path="importing-data-into-r.html"><a href="importing-data-into-r.html#read_csv"><i class="fa fa-check"></i><b>8.2</b> read_csv</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="importing-data-into-r.html"><a href="importing-data-into-r.html#tibbles-vs.-data-frames"><i class="fa fa-check"></i><b>8.2.1</b> Tibbles vs. data frames</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="importing-data-into-r.html"><a href="importing-data-into-r.html#importing-other-data-types"><i class="fa fa-check"></i><b>8.3</b> Importing other data types</a></li>
<li class="chapter" data-level="8.4" data-path="importing-data-into-r.html"><a href="importing-data-into-r.html#saving-data"><i class="fa fa-check"></i><b>8.4</b> Saving data</a></li>
<li class="chapter" data-level="8.5" data-path="importing-data-into-r.html"><a href="importing-data-into-r.html#further-reading-1"><i class="fa fa-check"></i><b>8.5</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tidying-your-data.html"><a href="tidying-your-data.html"><i class="fa fa-check"></i><b>9</b> Tidying your data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tidying-your-data.html"><a href="tidying-your-data.html#what-is-tidy-data"><i class="fa fa-check"></i><b>9.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="9.2" data-path="tidying-your-data.html"><a href="tidying-your-data.html#tools-to-tidy-your-data"><i class="fa fa-check"></i><b>9.2</b> Tools to tidy your data</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="tidying-your-data.html"><a href="tidying-your-data.html#making-data-longer"><i class="fa fa-check"></i><b>9.2.1</b> Making data ‘longer’</a></li>
<li class="chapter" data-level="9.2.2" data-path="tidying-your-data.html"><a href="tidying-your-data.html#making-data-wider"><i class="fa fa-check"></i><b>9.2.2</b> Making data ‘wider’</a></li>
<li class="chapter" data-level="9.2.3" data-path="tidying-your-data.html"><a href="tidying-your-data.html#seperating-columns"><i class="fa fa-check"></i><b>9.2.3</b> Seperating columns</a></li>
<li class="chapter" data-level="9.2.4" data-path="tidying-your-data.html"><a href="tidying-your-data.html#unitingcombining-columns"><i class="fa fa-check"></i><b>9.2.4</b> Uniting/combining columns</a></li>
<li class="chapter" data-level="9.2.5" data-path="tidying-your-data.html"><a href="tidying-your-data.html#renaming-columnsheaders"><i class="fa fa-check"></i><b>9.2.5</b> Renaming columns/headers</a></li>
<li class="chapter" data-level="9.2.6" data-path="tidying-your-data.html"><a href="tidying-your-data.html#rounding-numbers"><i class="fa fa-check"></i><b>9.2.6</b> Rounding numbers</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="tidying-your-data.html"><a href="tidying-your-data.html#tips-for-recording-data"><i class="fa fa-check"></i><b>9.3</b> Tips for recording data</a></li>
<li class="chapter" data-level="9.4" data-path="tidying-your-data.html"><a href="tidying-your-data.html#further-reading-2"><i class="fa fa-check"></i><b>9.4</b> Further reading</a></li>
<li class="chapter" data-level="9.5" data-path="tidying-your-data.html"><a href="tidying-your-data.html#chapter-references"><i class="fa fa-check"></i><b>9.5</b> Chapter References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html"><i class="fa fa-check"></i><b>10</b> Transform: dplyr and data manipulation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#selecting-by-row-or-value"><i class="fa fa-check"></i><b>10.1</b> Selecting by row or value</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#logical-oeprators"><i class="fa fa-check"></i><b>10.1.1</b> Logical oeprators</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#arranging-rows"><i class="fa fa-check"></i><b>10.2</b> Arranging rows</a></li>
<li class="chapter" data-level="10.3" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#selecting-by-column-or-variable"><i class="fa fa-check"></i><b>10.3</b> Selecting by column or variable</a></li>
<li class="chapter" data-level="10.4" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#adding-new-variables"><i class="fa fa-check"></i><b>10.4</b> Adding new variables</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#useful-mutate-function"><i class="fa fa-check"></i><b>10.4.1</b> Useful mutate function</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#group-and-summarize-data"><i class="fa fa-check"></i><b>10.5</b> Group and summarize data</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#useful-summarize-functions"><i class="fa fa-check"></i><b>10.5.1</b> Useful summarize functions</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#the-pipe-chaining-functions-together"><i class="fa fa-check"></i><b>10.6</b> The pipe: chaining functions together</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#notes-on-piping"><i class="fa fa-check"></i><b>10.6.1</b> Notes on piping</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="transform-dplyr-and-data-manipulation.html"><a href="transform-dplyr-and-data-manipulation.html#further-reading-3"><i class="fa fa-check"></i><b>10.7</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="programming-with-r.html"><a href="programming-with-r.html"><i class="fa fa-check"></i><b>11</b> Programming with R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="programming-with-r.html"><a href="programming-with-r.html#functions"><i class="fa fa-check"></i><b>11.1</b> Functions</a></li>
<li class="chapter" data-level="11.2" data-path="programming-with-r.html"><a href="programming-with-r.html#conditional-arguments"><i class="fa fa-check"></i><b>11.2</b> Conditional arguments</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="programming-with-r.html"><a href="programming-with-r.html#piping-conditional-statements"><i class="fa fa-check"></i><b>11.2.1</b> Piping conditional statements</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="programming-with-r.html"><a href="programming-with-r.html#when-to-use-functions"><i class="fa fa-check"></i><b>11.3</b> When to use functions</a></li>
<li class="chapter" data-level="11.4" data-path="programming-with-r.html"><a href="programming-with-r.html#further-reading-4"><i class="fa fa-check"></i><b>11.4</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="modelling.html"><a href="modelling.html"><i class="fa fa-check"></i><b>12</b> Modelling</a>
<ul>
<li class="chapter" data-level="12.1" data-path="modelling.html"><a href="modelling.html#base-r-linear-model"><i class="fa fa-check"></i><b>12.1</b> Base R Linear Model</a></li>
<li class="chapter" data-level="12.2" data-path="modelling.html"><a href="modelling.html#cleaning-up-model-ouputs"><i class="fa fa-check"></i><b>12.2</b> Cleaning up model ouputs</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="modelling.html"><a href="modelling.html#why-we-approach-modelling-this-way"><i class="fa fa-check"></i><b>12.2.1</b> Why we approach modelling this way</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="modelling.html"><a href="modelling.html#visualizing-model"><i class="fa fa-check"></i><b>12.3</b> Visualizing model</a></li>
<li class="chapter" data-level="12.4" data-path="modelling.html"><a href="modelling.html#further-reading-5"><i class="fa fa-check"></i><b>12.4</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="visualizations.html"><a href="visualizations.html"><i class="fa fa-check"></i><b>13</b> Visualizations</a>
<ul>
<li class="chapter" data-level="13.1" data-path="visualizations.html"><a href="visualizations.html#building-plots-ups"><i class="fa fa-check"></i><b>13.1</b> Building plots ups</a></li>
<li class="chapter" data-level="13.2" data-path="visualizations.html"><a href="visualizations.html#basic-plotting"><i class="fa fa-check"></i><b>13.2</b> Basic plotting</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="visualizations.html"><a href="visualizations.html#changing-plot-labels"><i class="fa fa-check"></i><b>13.2.1</b> Changing plot labels</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="visualizations.html"><a href="visualizations.html#further-reading-6"><i class="fa fa-check"></i><b>13.3</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="communication.html"><a href="communication.html"><i class="fa fa-check"></i><b>14</b> Communication</a></li>
<li class="part"><span><b>Section 3: Data Analysis Toolbox</b></span></li>
<li class="chapter" data-level="15" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>15</b> Introduction</a></li>
<li class="chapter" data-level="16" data-path="choosing-visualizations.html"><a href="choosing-visualizations.html"><i class="fa fa-check"></i><b>16</b> Choosing Visualizations</a></li>
<li class="chapter" data-level="17" data-path="linear-regression-redux.html"><a href="linear-regression-redux.html"><i class="fa fa-check"></i><b>17</b> Linear Regression Redux</a></li>
<li class="chapter" data-level="18" data-path="non-linear-logistic-regression-modelling.html"><a href="non-linear-logistic-regression-modelling.html"><i class="fa fa-check"></i><b>18</b> Non-linear Logistic Regression Modelling</a>
<ul>
<li class="chapter" data-level="18.1" data-path="non-linear-logistic-regression-modelling.html"><a href="non-linear-logistic-regression-modelling.html#visually-inspecting-our-data"><i class="fa fa-check"></i><b>18.1</b> Visually inspecting our data</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="non-linear-logistic-regression-modelling.html"><a href="non-linear-logistic-regression-modelling.html#annotating-maximal-values"><i class="fa fa-check"></i><b>18.1.1</b> Annotating maximal values</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="non-linear-logistic-regression-modelling.html"><a href="non-linear-logistic-regression-modelling.html#extracting-maximal-values"><i class="fa fa-check"></i><b>18.2</b> Extracting maximal values</a></li>
<li class="chapter" data-level="18.3" data-path="non-linear-logistic-regression-modelling.html"><a href="non-linear-logistic-regression-modelling.html#modelling-sigmoidal-curve"><i class="fa fa-check"></i><b>18.3</b> Modelling Sigmoidal Curve</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="non-linear-logistic-regression-modelling.html"><a href="non-linear-logistic-regression-modelling.html#calculating-logistic-regression"><i class="fa fa-check"></i><b>18.3.1</b> Calculating Logistic Regression</a></li>
<li class="chapter" data-level="18.3.2" data-path="non-linear-logistic-regression-modelling.html"><a href="non-linear-logistic-regression-modelling.html#extracting-model-parameters"><i class="fa fa-check"></i><b>18.3.2</b> Extracting model parameters</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Environmental Chemists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="workflows-for-r-coding" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Workflows for R coding</h1>
<p>In the previous chapter we did our coding in the console, which got messy rather quickly. To combat this, we code in <em>scripts</em>. Scripts are essentially a recipe that R reads to execute instead of you typing and running each line of code. And like a recipe, R reads your script from top to bottom. An important aspect of scripts is that <em>they’re reproducible</em>. In other words you should be able to rerun your script and get the exact same result every time.</p>
<p>So let’s go ahead and open a script.</p>
<div id="creating-or-opening-a-script" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Creating or opening a script</h2>
<p>To create a script:</p>
<ol style="list-style-type: decimal">
<li>Go to <code>File</code> -&gt; <code>New File</code> -&gt; <code>R Script</code></li>
<li>Then save your script by going to <code>File</code> -&gt; <code>Save As...</code>.
a. Make sure to save your file with the <code>.R</code> suffix.
b. <strong>Save your script in your project folder</strong>, otherwise you’ll run into issues.</li>
</ol>
<p>We’ve also provided an example script in the R4EnvChem project template. Assuming you’re currently in the template project you can open the script as follows:</p>
<ol style="list-style-type: decimal">
<li>Go to <code>File</code> -&gt; <code>Open File</code> -&gt; open the <code>Rscript-example.R</code> file.</li>
</ol>
<p>To run code, highlight the lines you wish to run and click ’Run` at the top of the script. Selecting all of the script will run every line.</p>
</div>
<div id="workspace-and-whats-real" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Workspace and what’s real</h2>
<p>We’ve already mentioned the <em>environment</em> pane that displays objects present in your R session. While they are useful to work with, they’re not <em>real</em>. That is to say, if you closed your R session, those objects would be lost. And while RStudio allows you to save a working environment (and it’s associated objects), it’s best to embrace that <em>only your scripts are real</em>. You can’t readily share your working environment, and even so it’s bad practice as you may be reference a previous iteration of an object giving you erroneous results. Think back to the chemistry lab where although you may jot notes down on loose leaf, only what’s written in your lab book is considered real… we’ll that’s how it’s supposed to work anyways.</p>
<p>The idea is everything you need can be generated from the original data and the instructions in your script Anyone should be able to take your data and your code and get the same results you got. This is paramount for reproducibility of your work and your results.</p>
</div>
<div id="saving-r-scripts" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Saving R scripts</h2>
<p>You can save an R script to a <code>.r</code> file by going to <em>File</em>-&gt;<em>Save</em> or by clicking the ‘save’ button in the top left of your script. Code saved to a <code>.r</code> file is considered <em>real</em>. Variables, plots, or data sets that only exist in your work-space (shown in the Environment window) are not. Whenever you close RStudio, any objects in R that are not considered <em>real</em> will be lost in that R session. Furthermore when you need to share your code (for school or publication) you’ll need to share your data and your script, but never your work-space. This is to increase predictability and helps people (and you) to make sure your work is reproducible, an under appreciate hallmark of science.</p>
<div id="what-should-i-save" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> What should I save?</h3>
<p>At this point in the chapter, two things should be clear:</p>
<ol style="list-style-type: decimal">
<li>R scripts saved to <code>.R</code> files are real.</li>
<li>Objects in your work-space/environment are not real, and will not be available to you after you close and re-open RStudio unless you re-run the code used to generate the work-space.</li>
</ol>
<p>So what is important to save in R, and how often should you save these files?</p>
<p>It is paramount that you save the scripts you code in, and that you save them regularly. Even if you’ve made small notation changes to the code, it is always a good idea to save your changes to the script before closing RStudio, as there is a good chance you will not remember the minor differences upon returning. You want to make sure that even if you lose an object in your environment, your script still contains the code you used to generate that object. You also want to make sure that you generate the object before you call it in part of another command, so that when you run your scripts from top-to-bottom, the variables are generated in the work-space before they are referenced by later commands.</p>
</div>
<div id="saving-objects" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Saving objects</h3>
<p>In some cases, your code may be used to generate large data structures which require quite a bit of input to create. It can be quite tedious to re-run the code used to generate these large data sets every time you open RStudio, and you might find yourself wanting to save the data structure to a <em>real</em> file that you can simply import the next time you open the application. Most often this will be an intermediate step of your data analysis in the form of a data frame. To save a data frame as a <code>.csv</code> file you use <code>write.csv()</code>.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="workflows-for-r-coding.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dummy data frame to save</span></span>
<span id="cb62-2"><a href="workflows-for-r-coding.html#cb62-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb62-3"><a href="workflows-for-r-coding.html#cb62-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>, <span class="st">&quot;no&quot;</span>, <span class="st">&quot;maybe&quot;</span>))</span>
<span id="cb62-4"><a href="workflows-for-r-coding.html#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="workflows-for-r-coding.html#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> df, </span>
<span id="cb62-6"><a href="workflows-for-r-coding.html#cb62-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">&quot;testData.csv&quot;</span>)</span></code></pre></div>
<p>Breaking it down:</p>
<ul>
<li>we created a dummy data frame <code>df</code></li>
<li>we called <code>write.csv()</code> and
<ul>
<li><code>x = df</code> specifies we want to save the data.frame <code>df</code></li>
<li><code>file = "data/testData.csv"</code> specifies <em>where</em> we want the file to save (in the <em>data</em> sub-directory, more later), and <em>what</em> our file will be called (<em>testData.csv</em>). It’s important to specify the file extension so R knows how to save it.</li>
</ul></li>
</ul>
<!-- I don't think we need to specify saving r objects other than data frames. I can't imagine a scenario where students would readily encounter this problem - DH -->
<!--

The `save()` function saves the input object or objects (i.e., vector, matrix, or data frame) to your working directory as an `.rda` file. Let's try saving our vectors `x` and `y` from the previous examples to a file called `vec.rda`.


```r
# save vectors
save(x, y, file = "vec.rda")
```

An `.rda` file should now exist in your project directory, as shown in the image below.

![Figure 3.7: Generated `.rda` file after using `save()`.](images/Rstudio_rda.png)

Now, let's try removing our vectors from our work-space and loading them from the `.rda` file we just generated. You can use `rm()` to remove objects from your work-space, as shown below.


```r
rm(x, y)
```

Now that our work-space is empty, if you type `x` or `y` into the console, RStudio will not know what to return in response. We have to import the data back into our work-space so that RStudio knows what `x` and `y` contain.You can use `load()` to import the vectors to your current RStudio work-space, using the format below.


```r
load(file = "vec.rda")
```

The vectors should now be present in the work-space again, and can be printed to the console if you type in their respective names.
-->
</div>
</div>
<div id="script-formatting" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Script formatting</h2>
<p>You should now be familiar with how to open the Scripts window, as well as some of the advantages of typing your code into this window rather than into the console directly. Before you write your first script, let’s review some basic script formatting.</p>
<p>Before you enter any code into your script, it is good practice to fill the first few lines with text comments which indicate the script’s title, author, and creation or last edit date. You can create a comment in a script by typing <code>#</code> before your text. An example is given below.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="workflows-for-r-coding.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Title: Ozone time series script</span></span>
<span id="cb63-2"><a href="workflows-for-r-coding.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Author: Georgia Green</span></span>
<span id="cb63-3"><a href="workflows-for-r-coding.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Date: January 8, 2072</span></span></code></pre></div>
<p>Below your script header, you should include any packages that need to be loaded for the script to run. Including the necessary packages at the top of the script allows you, and anyone you share your code with, to easily see what packages they need to install. This also means that if you decide to run an entire script at once, the necessary packages will always be loaded before any subsequent code that requires those packages to work.</p>
<p>The first few lines of your scripts should look something like the following.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="workflows-for-r-coding.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Title: Example R Script for Visualizing Air Quality Data </span></span>
<span id="cb64-2"><a href="workflows-for-r-coding.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Author: John Guy Rubberboots</span></span>
<span id="cb64-3"><a href="workflows-for-r-coding.html#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Date: 24 June 2021</span></span>
<span id="cb64-4"><a href="workflows-for-r-coding.html#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="workflows-for-r-coding.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Packages ---- </span></span>
<span id="cb64-6"><a href="workflows-for-r-coding.html#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="workflows-for-r-coding.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Install and open tidyverse if you haven&#39;t already </span></span>
<span id="cb64-8"><a href="workflows-for-r-coding.html#cb64-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-9"><a href="workflows-for-r-coding.html#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb64-10"><a href="workflows-for-r-coding.html#cb64-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-11"><a href="workflows-for-r-coding.html#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>The rest of your script should be dedicated to executable code. It is good practice to include text comments throughout the script, in between different chunks of code, to remind yourself what the different sections of code are for (i.e., <code>#import packages</code> in the above example). This also makes it easy for anyone you share your code with to understand what you’re trying to do with different sections within the script.</p>
<p>You can also use headers and sub-headers in your scripts using <code>#</code>, <code>##</code>, and <code>###</code> before your text and <code>---</code> after as shown below:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="workflows-for-r-coding.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Section ----</span></span>
<span id="cb65-2"><a href="workflows-for-r-coding.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Subsection ----</span></span>
<span id="cb65-3"><a href="workflows-for-r-coding.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="do">### Sub-subsection ----</span></span></code></pre></div>
<p>Headings and subheadings are picked up by RStudio and displayed in the Document Outline box. You can open the Document Outline box by clicking the button highlighted in the image below. Use of these headings allows easy navigation of long scripts, as you can navigate between sections using the Document Outline box.</p>
<div class="figure">
<img src="images/Rstudio_documentoutline2.png" style="width:100.0%" alt="" />
<p class="caption">Example script headings, document outlines, and comments. Note the “—” which specifies a comment is a header.</p>
</div>
</div>
<div id="viewing-data-and-code-simultaneously" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Viewing data and code simultaneously</h2>
<p>Before we get into more about coding and workflows, you may want to know how to view your scripts and data side-by-side. You can open a script, plot, or data set in a new window by clicking and dragging the tab in RStudio (may not be compatible with Mac), or by clicking the button highlighted in the image below.</p>
<div class="figure">
<img src="images/Rstudio_newwindow.png" style="width:100.0%" alt="" />
<p class="caption">How to open an R script/plot/data set in a new window.</p>
</div>
<p>Now that you’re familiar with navigating RStudio and some basic coding building blocks, let’s move over to Chapter 3, where we’ll review a normal workflow in R.</p>
</div>
<div id="troubleshooting-error-messages" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Troubleshooting error messages</h2>
<p>In the previous section, you were introduced to your first error message in R, and we briefly discussed how to resolve the issue.</p>
<p>As you become more familiar with R and start using more complex functions, you will become better acquainted with error messages in R, and how to deal with them accordingly.</p>
<p>We’ll go through a few examples of error messages in the following sections, as well as how to read the errors, and how to fix your code to resolve the issues.</p>
<div id="script-diagnostics" class="section level3" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Script diagnostics</h3>
<p>When writing code in the Script window, RStudio will highlight any syntax errors in your code with a red squiggly line and an ‘x’ in the side bar, as shown below. You can hover over the ‘x’ to see what is causing the error.</p>
<div class="figure">
<img src="images/Rstudio_diagnostics.png" alt="" />
<p class="caption">Figure 3.8: RStudio highlights syntax errors in the Scripts window.</p>
</div>
<p>In the above message, R is telling you that it is not sure what to do with <code>b</code>. As mentioned previously, variable assignment is done in the format <code>name &lt;- assignment</code>. However, in the above example, the variable assignment statement is written as <code>name name &lt;- assignment</code>. Since variable names cannot contain spaces, R reads <code>a b</code> as two separate input variable names, not as a single string. If you wanted to assign a value of 0 to both <code>a</code> and <code>b</code>, you would need to write the statement once per variable, as shown below.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="workflows-for-r-coding.html#cb66-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb66-2"><a href="workflows-for-r-coding.html#cb66-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<p>Let’s look at another example. Some functions require you to write code with nested parentheses. A good example would be the <code>aes()</code> argument that is called inside of <code>ggplot()</code>, as shown below.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="workflows-for-r-coding.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot ozone concentration vs. time</span></span>
<span id="cb67-2"><a href="workflows-for-r-coding.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> airPol, </span>
<span id="cb67-3"><a href="workflows-for-r-coding.html#cb67-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> date.time,</span>
<span id="cb67-4"><a href="workflows-for-r-coding.html#cb67-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> concentration,</span>
<span id="cb67-5"><a href="workflows-for-r-coding.html#cb67-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour =</span> pollutant)) <span class="sc">+</span></span>
<span id="cb67-6"><a href="workflows-for-r-coding.html#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p>(For more detail about importing and using <code>ggplot2</code>, please re-visit Chapter 2, section 2.3.4, or see Chapter 11.)</p>
<p>If you were to forget one of the parentheses in the previous line of code, RStudio would highlight it similar to below:</p>
<div class="figure">
<img src="images/Rstudio_unmatched.png" alt="" />
<p class="caption">Figure 3.9: RStudio highlights unmatched parentheses in the script window.</p>
</div>
<p>Here R is telling you that you have an unmatched opening bracket. To resolve the error, simply add a closing bracket to match.</p>
<p>The <code>expected ',' after expression</code> is a common error that you will see accompanying unmatched opening brackets. Sometimes you might get this error in the console after running code that is missing a bracket somewhere. It is good practice to check your parentheses a few times before running your code to make sure that all the commands are closed, and that R doesn’t keep waiting for you to continue inputting code after you’ve click <em>Run</em>. If you notice that the <code>&gt;</code> in your R console has turned into a <code>+</code>, this is likely because you’ve just run a command that is missing a closing bracket, and thus, R is not aware that your code is finished. Simply input a closing bracket into the console, and the <code>&gt;</code> should return.</p>
</div>
<div id="reading-error-codes" class="section level3" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> Reading error codes</h3>
<p>While the script window is very useful for pointing out syntax errors in your code, there are many other errors that can arise in RStudio which the script window is not able to capture. These are generally errors that arise from trying to execute your code, rather than from mistakes in your syntax.</p>
<p>The following is a prime example of such an error.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="workflows-for-r-coding.html#cb68-1" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="sc">+</span> <span class="st">&quot;hi&quot;</span></span></code></pre></div>
<pre><code>## Error in 8 + &quot;hi&quot;: non-numeric argument to binary operator</code></pre>
<p>Here we are trying to add a numeric value (8) to a character string (“hi”), then set the sum of the two to variable <code>q</code>. R has given us an error in return, because there is no logical way for R to add a numeric value to non-numeric text.</p>
<p>The error indicates that we have passed a <code>non-numeric argument to binary operator</code>, meaning we have used a non-numeric data type for an expression which is exclusively reserved for numeric data. If you try to add, divide or multiply two character strings using arithmetic operations in the console, you will get the same error.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="workflows-for-r-coding.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;hey&quot;</span> <span class="sc">*</span> <span class="st">&quot;hi&quot;</span></span></code></pre></div>
<pre><code>## Error in &quot;hey&quot; * &quot;hi&quot;: non-numeric argument to binary operator</code></pre>
<p>It is important to be aware of these error codes as many functions require specific data types as their inputs. You can always look at the required data type by looking at the documentation for the function (generally, this can be viewed by typing <code>?function</code> into the console, where <code>function</code> is the name of the function). If the function requires numeric data, inputting character strings or logical values will throw the errors shown above. If the function requires logical values, inputting numeric data or character strings will throw the errors shown above.</p>
<p>In order to avoid these errors, make sure that you are using the right type of data in your functions. You can always check your data type using <code>class()</code>. Some examples are shown below.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="workflows-for-r-coding.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="st">&quot;hi&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="workflows-for-r-coding.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="workflows-for-r-coding.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(1L)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="workflows-for-r-coding.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
</div>
</div>
<div id="summary-3" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Summary</h2>
<p>In this chapter we’ve covered:</p>
<ul>
<li>R workflows in the context of projects and scripts</li>
<li>What’s considered <em>real</em> when working in RStudio</li>
<li>How to format your script for legibility (Remember you’re the one who’s going to be stuck rereading it!)</li>
<li>Troubleshooting some common error messages</li>
</ul>
<p>Now that you’re familiar the above, we’ll introduce RMarkdown, a way to combine your R code, it’s outputs, and your writing all in one dynamic document (like your lab reports!).</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-coding-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="using-r-markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/DavidRossHall/R4EnvChem/r-workflows.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R4EnvChem.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
