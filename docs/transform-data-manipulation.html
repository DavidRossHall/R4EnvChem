<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 Transform: Data Manipulation | R for Environmental Chemistry</title>
  <meta name="description" content="This is a proof-of-concept for a further full length textbook." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 Transform: Data Manipulation | R for Environmental Chemistry" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a proof-of-concept for a further full length textbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 Transform: Data Manipulation | R for Environmental Chemistry" />
  
  <meta name="twitter:description" content="This is a proof-of-concept for a further full length textbook." />
  

<meta name="author" content="David Hall, Steven Kutarna, Kristen Yeh, Hui Peng, Chaerin Song, and Jessica D’eon" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidying-your-data.html"/>
<link rel="next" href="ggplot-basic-visualizations.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.32/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
<script src="libs/tabwid-1.1.3/tabwid.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Environmental Chemistry</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#providing-feedback"><i class="fa fa-check"></i>Providing Feedback</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowlegements"><i class="fa fa-check"></i>Acknowlegements</a></li>
</ul></li>
<li class="part"><span><b>Part 1: Getting Started in R</b></span></li>
<li class="chapter" data-level="1" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Intro to R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#r-language"><i class="fa fa-check"></i><b>1.1</b> R Language</a></li>
<li class="chapter" data-level="1.2" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#setting-up-your-environment"><i class="fa fa-check"></i><b>1.3</b> Setting Up Your Environment</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#working-remotely-recommended-for-coursework"><i class="fa fa-check"></i><b>1.3.1</b> Working Remotely (Recommended for Coursework)</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#working-locally"><i class="fa fa-check"></i><b>1.3.2</b> Working Locally</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#using-rstudio"><i class="fa fa-check"></i><b>1.4</b> Using RStudio</a></li>
<li class="chapter" data-level="1.5" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#running-r-code"><i class="fa fa-check"></i><b>1.5</b> Running R Code</a></li>
<li class="chapter" data-level="1.6" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#customizing-rstudio"><i class="fa fa-check"></i><b>1.6</b> Customizing RStudio</a></li>
<li class="chapter" data-level="1.7" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#where-to-get-help"><i class="fa fa-check"></i><b>1.7</b> Where to get help</a></li>
<li class="chapter" data-level="1.8" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#summary"><i class="fa fa-check"></i><b>1.8</b> Summary</a></li>
<li class="chapter" data-level="1.9" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#exercise"><i class="fa fa-check"></i><b>1.9</b> Exercise</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#setup"><i class="fa fa-check"></i><b>1.9.1</b> Setup</a></li>
<li class="chapter" data-level="1.9.2" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#basic-r-commands"><i class="fa fa-check"></i><b>1.9.2</b> Basic R Commands</a></li>
<li class="chapter" data-level="1.9.3" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#using-the-help-function"><i class="fa fa-check"></i><b>1.9.3</b> Using the Help Function</a></li>
<li class="chapter" data-level="1.9.4" data-path="intro-to-r-and-rstudio.html"><a href="intro-to-r-and-rstudio.html#reflection"><i class="fa fa-check"></i><b>1.9.4</b> Reflection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rstudio-projects.html"><a href="rstudio-projects.html"><i class="fa fa-check"></i><b>2</b> RStudio Projects</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rstudio-projects.html"><a href="rstudio-projects.html#uploading-files-to-rstudio-server-on-jupyterhub"><i class="fa fa-check"></i><b>2.1</b> Uploading Files to RStudio server on JupyterHub</a></li>
<li class="chapter" data-level="2.2" data-path="rstudio-projects.html"><a href="rstudio-projects.html#paths-and-directories"><i class="fa fa-check"></i><b>2.2</b> Paths and Directories</a></li>
<li class="chapter" data-level="2.3" data-path="rstudio-projects.html"><a href="rstudio-projects.html#importing-a-project"><i class="fa fa-check"></i><b>2.3</b> Importing a Project</a></li>
<li class="chapter" data-level="2.4" data-path="rstudio-projects.html"><a href="rstudio-projects.html#creating-an-rstudio-project"><i class="fa fa-check"></i><b>2.4</b> Creating an RStudio Project</a></li>
<li class="chapter" data-level="2.5" data-path="rstudio-projects.html"><a href="rstudio-projects.html#a-sneak-peek-at-.rmd-files"><i class="fa fa-check"></i><b>2.5</b> A Sneak Peek at <code>.Rmd</code> Files</a></li>
<li class="chapter" data-level="2.6" data-path="rstudio-projects.html"><a href="rstudio-projects.html#summary-1"><i class="fa fa-check"></i><b>2.6</b> Summary</a></li>
<li class="chapter" data-level="2.7" data-path="rstudio-projects.html"><a href="rstudio-projects.html#exercise-1"><i class="fa fa-check"></i><b>2.7</b> Exercise</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="rstudio-projects.html"><a href="rstudio-projects.html#get-started"><i class="fa fa-check"></i><b>2.7.1</b> Get Started:</a></li>
<li class="chapter" data-level="2.7.2" data-path="rstudio-projects.html"><a href="rstudio-projects.html#confirm-your-working-directory"><i class="fa fa-check"></i><b>2.7.2</b> Confirm Your Working Directory</a></li>
<li class="chapter" data-level="2.7.3" data-path="rstudio-projects.html"><a href="rstudio-projects.html#creating-your-own-project"><i class="fa fa-check"></i><b>2.7.3</b> Creating Your Own Project:</a></li>
<li class="chapter" data-level="2.7.4" data-path="rstudio-projects.html"><a href="rstudio-projects.html#create-your-rmd-file"><i class="fa fa-check"></i><b>2.7.4</b> Create Your Rmd File:</a></li>
<li class="chapter" data-level="2.7.5" data-path="rstudio-projects.html"><a href="rstudio-projects.html#upload-a-file-from-your-computer"><i class="fa fa-check"></i><b>2.7.5</b> Upload a file from your computer:</a></li>
<li class="chapter" data-level="2.7.6" data-path="rstudio-projects.html"><a href="rstudio-projects.html#reflection-1"><i class="fa fa-check"></i><b>2.7.6</b> Reflection:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="how-to-use-this-textbook.html"><a href="how-to-use-this-textbook.html"><i class="fa fa-check"></i><b>3</b> How to Use This Textbook</a>
<ul>
<li class="chapter" data-level="3.1" data-path="how-to-use-this-textbook.html"><a href="how-to-use-this-textbook.html#useful-features"><i class="fa fa-check"></i><b>3.1</b> Useful Features</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="how-to-use-this-textbook.html"><a href="how-to-use-this-textbook.html#searching-the-textbook"><i class="fa fa-check"></i><b>3.1.1</b> Searching the Textbook</a></li>
<li class="chapter" data-level="3.1.2" data-path="how-to-use-this-textbook.html"><a href="how-to-use-this-textbook.html#original-r-markdown-of-the-textbook-chapters"><i class="fa fa-check"></i><b>3.1.2</b> Original R Markdown of the Textbook Chapters</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="how-to-use-this-textbook.html"><a href="how-to-use-this-textbook.html#end-of-chapter-exercises"><i class="fa fa-check"></i><b>3.2</b> End-of-Chapter Exercises</a></li>
</ul></li>
<li class="part"><span><b>Part 2: How to Code in R</b></span></li>
<li class="chapter" data-level="4" data-path="r-coding-basics.html"><a href="r-coding-basics.html"><i class="fa fa-check"></i><b>4</b> R Coding Basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-coding-basics.html"><a href="r-coding-basics.html#variables"><i class="fa fa-check"></i><b>4.1</b> Variables</a></li>
<li class="chapter" data-level="4.2" data-path="r-coding-basics.html"><a href="r-coding-basics.html#data-types"><i class="fa fa-check"></i><b>4.2</b> Data Types</a></li>
<li class="chapter" data-level="4.3" data-path="r-coding-basics.html"><a href="r-coding-basics.html#data-structures"><i class="fa fa-check"></i><b>4.3</b> Data Structures</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="r-coding-basics.html"><a href="r-coding-basics.html#data-frames"><i class="fa fa-check"></i><b>4.3.1</b> Data Frames</a></li>
<li class="chapter" data-level="4.3.2" data-path="r-coding-basics.html"><a href="r-coding-basics.html#accessing-data-in-subfolders"><i class="fa fa-check"></i><b>4.3.2</b> Accessing Data in Subfolders</a></li>
<li class="chapter" data-level="4.3.3" data-path="r-coding-basics.html"><a href="r-coding-basics.html#other-data-structures"><i class="fa fa-check"></i><b>4.3.3</b> Other Data Structures</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="r-coding-basics.html"><a href="r-coding-basics.html#conditional-statements"><i class="fa fa-check"></i><b>4.4</b> Conditional Statements</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="r-coding-basics.html"><a href="r-coding-basics.html#understanding-r-syntax"><i class="fa fa-check"></i><b>4.4.1</b> Understanding R Syntax</a></li>
<li class="chapter" data-level="4.4.2" data-path="r-coding-basics.html"><a href="r-coding-basics.html#the-basic-if-statement"><i class="fa fa-check"></i><b>4.4.2</b> The Basic <code>if</code> Statement</a></li>
<li class="chapter" data-level="4.4.3" data-path="r-coding-basics.html"><a href="r-coding-basics.html#expanding-with-else-and-else-if"><i class="fa fa-check"></i><b>4.4.3</b> Expanding with <code>else</code> and <code>else if</code></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="r-coding-basics.html"><a href="r-coding-basics.html#r-built-in-functions"><i class="fa fa-check"></i><b>4.5</b> R built-in Functions</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="r-coding-basics.html"><a href="r-coding-basics.html#exploring-more-built-in-functions"><i class="fa fa-check"></i><b>4.5.1</b> Exploring More Built-In Functions</a></li>
<li class="chapter" data-level="4.5.2" data-path="r-coding-basics.html"><a href="r-coding-basics.html#function-documentation"><i class="fa fa-check"></i><b>4.5.2</b> Function Documentation</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="r-coding-basics.html"><a href="r-coding-basics.html#summary-2"><i class="fa fa-check"></i><b>4.6</b> Summary</a></li>
<li class="chapter" data-level="4.7" data-path="r-coding-basics.html"><a href="r-coding-basics.html#exercise-2"><i class="fa fa-check"></i><b>4.7</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html"><i class="fa fa-check"></i><b>5</b> Workflows for R Coding</a>
<ul>
<li class="chapter" data-level="5.1" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#creating-or-opening-an-r-markdown-document"><i class="fa fa-check"></i><b>5.1</b> Creating or opening an R Markdown document</a></li>
<li class="chapter" data-level="5.2" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#workspace-and-whats-real"><i class="fa fa-check"></i><b>5.2</b> Workspace and What’s Real</a></li>
<li class="chapter" data-level="5.3" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#saving-r-markdown"><i class="fa fa-check"></i><b>5.3</b> Saving R Markdown</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#what-should-i-save"><i class="fa fa-check"></i><b>5.3.1</b> What Should I Save?</a></li>
<li class="chapter" data-level="5.3.2" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#saving-objects"><i class="fa fa-check"></i><b>5.3.2</b> Saving Objects</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#script-formatting"><i class="fa fa-check"></i><b>5.4</b> Script formatting</a></li>
<li class="chapter" data-level="5.5" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#viewing-data-and-code-simultaneously"><i class="fa fa-check"></i><b>5.5</b> Viewing Data and Code Simultaneously</a></li>
<li class="chapter" data-level="5.6" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#troubleshooting-error-messages"><i class="fa fa-check"></i><b>5.6</b> Troubleshooting Error Messages</a></li>
<li class="chapter" data-level="5.7" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#summary-3"><i class="fa fa-check"></i><b>5.7</b> Summary</a></li>
<li class="chapter" data-level="5.8" data-path="workflows-for-r-coding.html"><a href="workflows-for-r-coding.html#exercise-3"><i class="fa fa-check"></i><b>5.8</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="using-r-markdown.html"><a href="using-r-markdown.html"><i class="fa fa-check"></i><b>6</b> Using R Markdown</a>
<ul>
<li class="chapter" data-level="6.1" data-path="using-r-markdown.html"><a href="using-r-markdown.html#getting-started-with-r-markdown"><i class="fa fa-check"></i><b>6.1</b> Getting Started with R Markdown</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="using-r-markdown.html"><a href="using-r-markdown.html#understanding-r-markdown"><i class="fa fa-check"></i><b>6.1.1</b> Understanding R Markdown</a></li>
<li class="chapter" data-level="6.1.2" data-path="using-r-markdown.html"><a href="using-r-markdown.html#running-code-in-r-markdown"><i class="fa fa-check"></i><b>6.1.2</b> Running Code in R Markdown</a></li>
<li class="chapter" data-level="6.1.3" data-path="using-r-markdown.html"><a href="using-r-markdown.html#headings-and-subheadings"><i class="fa fa-check"></i><b>6.1.3</b> Headings and Subheadings</a></li>
<li class="chapter" data-level="6.1.4" data-path="using-r-markdown.html"><a href="using-r-markdown.html#latex-basics"><i class="fa fa-check"></i><b>6.1.4</b> LaTeX Basics</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="using-r-markdown.html"><a href="using-r-markdown.html#compiling-your-final-report"><i class="fa fa-check"></i><b>6.2</b> Compiling your final report</a></li>
<li class="chapter" data-level="6.3" data-path="using-r-markdown.html"><a href="using-r-markdown.html#authoring-with-r-markdown"><i class="fa fa-check"></i><b>6.3</b> Authoring with R Markdown</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="using-r-markdown.html"><a href="using-r-markdown.html#r-markdown-syntax"><i class="fa fa-check"></i><b>6.3.1</b> R Markdown Syntax</a></li>
<li class="chapter" data-level="6.3.2" data-path="using-r-markdown.html"><a href="using-r-markdown.html#r-code-chunk-options"><i class="fa fa-check"></i><b>6.3.2</b> R Code Chunk Options</a></li>
<li class="chapter" data-level="6.3.3" data-path="using-r-markdown.html"><a href="using-r-markdown.html#inserting-images"><i class="fa fa-check"></i><b>6.3.3</b> Inserting images</a></li>
<li class="chapter" data-level="6.3.4" data-path="using-r-markdown.html"><a href="using-r-markdown.html#generating-tables"><i class="fa fa-check"></i><b>6.3.4</b> Generating tables</a></li>
<li class="chapter" data-level="6.3.5" data-path="using-r-markdown.html"><a href="using-r-markdown.html#spellcheck-in-r-markdown"><i class="fa fa-check"></i><b>6.3.5</b> Spellcheck in R Markdown</a></li>
<li class="chapter" data-level="6.3.6" data-path="using-r-markdown.html"><a href="using-r-markdown.html#exporting-r-markdown-documents"><i class="fa fa-check"></i><b>6.3.6</b> Exporting R Markdown documents</a></li>
<li class="chapter" data-level="6.3.7" data-path="using-r-markdown.html"><a href="using-r-markdown.html#rstudio-tips-and-tricks"><i class="fa fa-check"></i><b>6.3.7</b> RStudio tips and tricks</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="using-r-markdown.html"><a href="using-r-markdown.html#r-markdown-resources"><i class="fa fa-check"></i><b>6.4</b> R Markdown resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-packages.html"><a href="r-packages.html"><i class="fa fa-check"></i><b>7</b> R Packages</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-packages.html"><a href="r-packages.html#what-are-r-packages"><i class="fa fa-check"></i><b>7.1</b> What are R packages?</a></li>
<li class="chapter" data-level="7.2" data-path="r-packages.html"><a href="r-packages.html#how-to-use-r-packages"><i class="fa fa-check"></i><b>7.2</b> How to use R packages</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="r-packages.html"><a href="r-packages.html#how-to-install-packages"><i class="fa fa-check"></i><b>7.2.1</b> How to install packages</a></li>
<li class="chapter" data-level="7.2.2" data-path="r-packages.html"><a href="r-packages.html#how-to-load-packages"><i class="fa fa-check"></i><b>7.2.2</b> How to load packages</a></li>
<li class="chapter" data-level="7.2.3" data-path="r-packages.html"><a href="r-packages.html#calling-specific-functions"><i class="fa fa-check"></i><b>7.2.3</b> Calling specific functions</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="r-packages.html"><a href="r-packages.html#tidyverse-the-golden-toolbox-of-r"><i class="fa fa-check"></i><b>7.3</b> Tidyverse: The Golden Toolbox of R</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="r-packages.html"><a href="r-packages.html#loading-the-tidyverse"><i class="fa fa-check"></i><b>7.3.1</b> Loading the Tidyverse</a></li>
<li class="chapter" data-level="7.3.2" data-path="r-packages.html"><a href="r-packages.html#data-visualization"><i class="fa fa-check"></i><b>7.3.2</b> Data Visualization</a></li>
<li class="chapter" data-level="7.3.3" data-path="r-packages.html"><a href="r-packages.html#data-manipulation"><i class="fa fa-check"></i><b>7.3.3</b> Data Manipulation</a></li>
<li class="chapter" data-level="7.3.4" data-path="r-packages.html"><a href="r-packages.html#efficient-data-reading"><i class="fa fa-check"></i><b>7.3.4</b> Efficient Data Reading</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="r-packages.html"><a href="r-packages.html#summary-4"><i class="fa fa-check"></i><b>7.4</b> Summary</a></li>
<li class="chapter" data-level="7.5" data-path="r-packages.html"><a href="r-packages.html#exercise-4"><i class="fa fa-check"></i><b>7.5</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="loops-and-functions-in-r.html"><a href="loops-and-functions-in-r.html"><i class="fa fa-check"></i><b>8</b> Loops and Functions in R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="loops-and-functions-in-r.html"><a href="loops-and-functions-in-r.html#loops"><i class="fa fa-check"></i><b>8.1</b> Loops</a></li>
<li class="chapter" data-level="8.2" data-path="loops-and-functions-in-r.html"><a href="loops-and-functions-in-r.html#writing-custom-functions-in-r"><i class="fa fa-check"></i><b>8.2</b> Writing custom functions in R</a></li>
<li class="chapter" data-level="8.3" data-path="loops-and-functions-in-r.html"><a href="loops-and-functions-in-r.html#conditional-arguments"><i class="fa fa-check"></i><b>8.3</b> Conditional arguments</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="loops-and-functions-in-r.html"><a href="loops-and-functions-in-r.html#piping-conditional-statements"><i class="fa fa-check"></i><b>8.3.1</b> Piping conditional statements</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="loops-and-functions-in-r.html"><a href="loops-and-functions-in-r.html#further_reading_chapter8"><i class="fa fa-check"></i><b>8.4</b> Further reading</a></li>
</ul></li>
<li class="part"><span><b>Part 3: Data Analysis in R</b></span></li>
<li class="chapter" data-level="9" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html"><i class="fa fa-check"></i><b>9</b> Intro to Data Analysis</a>
<ul>
<li class="chapter" data-level="9.1" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#example-data"><i class="fa fa-check"></i><b>9.1</b> Example Data</a></li>
<li class="chapter" data-level="9.2" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#sneak-peek-at-data-analysis"><i class="fa fa-check"></i><b>9.2</b> Sneak Peek at Data Analysis</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#setting-up"><i class="fa fa-check"></i><b>9.2.1</b> Setting Up</a></li>
<li class="chapter" data-level="9.2.2" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#tidying-our-data"><i class="fa fa-check"></i><b>9.2.2</b> Tidying Our Data</a></li>
<li class="chapter" data-level="9.2.3" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#investigating-storm-patterns"><i class="fa fa-check"></i><b>9.2.3</b> Investigating Storm Patterns</a></li>
<li class="chapter" data-level="9.2.4" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#visualization-geographical-distribution"><i class="fa fa-check"></i><b>9.2.4</b> Visualization: Geographical Distribution</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#further_reading_chapter9"><i class="fa fa-check"></i><b>9.3</b> Further Reading</a></li>
<li class="chapter" data-level="9.4" data-path="intro-to-data-analysis.html"><a href="intro-to-data-analysis.html#exercise-5"><i class="fa fa-check"></i><b>9.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="importing-your-data-into-r.html"><a href="importing-your-data-into-r.html"><i class="fa fa-check"></i><b>10</b> Importing Your Data Into R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="importing-your-data-into-r.html"><a href="importing-your-data-into-r.html#csv-files"><i class="fa fa-check"></i><b>10.1</b> .csv files</a></li>
<li class="chapter" data-level="10.2" data-path="importing-your-data-into-r.html"><a href="importing-your-data-into-r.html#read_csv"><i class="fa fa-check"></i><b>10.2</b> read_csv</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="importing-your-data-into-r.html"><a href="importing-your-data-into-r.html#tibbles-vs.-data-frames"><i class="fa fa-check"></i><b>10.2.1</b> Tibbles vs. data frames</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="importing-your-data-into-r.html"><a href="importing-your-data-into-r.html#importing-other-data-types"><i class="fa fa-check"></i><b>10.3</b> Importing other data types</a></li>
<li class="chapter" data-level="10.4" data-path="importing-your-data-into-r.html"><a href="importing-your-data-into-r.html#saving-data"><i class="fa fa-check"></i><b>10.4</b> Saving data</a></li>
<li class="chapter" data-level="10.5" data-path="importing-your-data-into-r.html"><a href="importing-your-data-into-r.html#further_reading_chapter10"><i class="fa fa-check"></i><b>10.5</b> Further Reading</a></li>
<li class="chapter" data-level="10.6" data-path="importing-your-data-into-r.html"><a href="importing-your-data-into-r.html#exercise-6"><i class="fa fa-check"></i><b>10.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tidying-your-data.html"><a href="tidying-your-data.html"><i class="fa fa-check"></i><b>11</b> Tidying Your Data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="tidying-your-data.html"><a href="tidying-your-data.html#what-is-tidy-data"><i class="fa fa-check"></i><b>11.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="11.2" data-path="tidying-your-data.html"><a href="tidying-your-data.html#tools-to-tidy-your-data"><i class="fa fa-check"></i><b>11.2</b> Tools to tidy your data</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="tidying-your-data.html"><a href="tidying-your-data.html#selection-helpers"><i class="fa fa-check"></i><b>11.2.1</b> Selection helpers</a></li>
<li class="chapter" data-level="11.2.2" data-path="tidying-your-data.html"><a href="tidying-your-data.html#separating-columns"><i class="fa fa-check"></i><b>11.2.2</b> Separating columns</a></li>
<li class="chapter" data-level="11.2.3" data-path="tidying-your-data.html"><a href="tidying-your-data.html#unitingcombining-columns"><i class="fa fa-check"></i><b>11.2.3</b> Uniting/combining columns</a></li>
<li class="chapter" data-level="11.2.4" data-path="tidying-your-data.html"><a href="tidying-your-data.html#renaming-columnsheaders"><i class="fa fa-check"></i><b>11.2.4</b> Renaming columns/headers</a></li>
<li class="chapter" data-level="11.2.5" data-path="tidying-your-data.html"><a href="tidying-your-data.html#chaining-multiple-operations"><i class="fa fa-check"></i><b>11.2.5</b> Chaining multiple operations</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="tidying-your-data.html"><a href="tidying-your-data.html#tips-for-recording-data"><i class="fa fa-check"></i><b>11.3</b> Tips for recording data</a></li>
<li class="chapter" data-level="11.4" data-path="tidying-your-data.html"><a href="tidying-your-data.html#further_reading_chapter11"><i class="fa fa-check"></i><b>11.4</b> Further reading</a></li>
<li class="chapter" data-level="11.5" data-path="tidying-your-data.html"><a href="tidying-your-data.html#chapter-references"><i class="fa fa-check"></i><b>11.5</b> Chapter References</a></li>
<li class="chapter" data-level="11.6" data-path="tidying-your-data.html"><a href="tidying-your-data.html#exercise-7"><i class="fa fa-check"></i><b>11.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html"><i class="fa fa-check"></i><b>12</b> Transform: Data Manipulation</a>
<ul>
<li class="chapter" data-level="12.1" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#selecting-by-row-or-value"><i class="fa fa-check"></i><b>12.1</b> Selecting by row or value</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#logical-operators"><i class="fa fa-check"></i><b>12.1.1</b> Logical operators</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#arranging-rows"><i class="fa fa-check"></i><b>12.2</b> Arranging rows</a></li>
<li class="chapter" data-level="12.3" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#selecting-column-name"><i class="fa fa-check"></i><b>12.3</b> Selecting column name</a></li>
<li class="chapter" data-level="12.4" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#deleting-columns-or-rows"><i class="fa fa-check"></i><b>12.4</b> Deleting Columns or Rows</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#deleting-columns"><i class="fa fa-check"></i><b>12.4.1</b> Deleting columns</a></li>
<li class="chapter" data-level="12.4.2" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#deleting-rows"><i class="fa fa-check"></i><b>12.4.2</b> Deleting rows</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#adding-new-variables"><i class="fa fa-check"></i><b>12.5</b> Adding new variables</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#mutate-with-a-condition"><i class="fa fa-check"></i><b>12.5.1</b> Mutate with a condition</a></li>
<li class="chapter" data-level="12.5.2" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#useful-mutate-function"><i class="fa fa-check"></i><b>12.5.2</b> Useful mutate function</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#group-and-summarize-data"><i class="fa fa-check"></i><b>12.6</b> Group and summarize data</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#useful-summarize-functions"><i class="fa fa-check"></i><b>12.6.1</b> Useful summarize functions</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#the-pipe-chaining-functions-together"><i class="fa fa-check"></i><b>12.7</b> The Pipe: Chaining Functions Together</a>
<ul>
<li class="chapter" data-level="12.7.1" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#notes-on-piping"><i class="fa fa-check"></i><b>12.7.1</b> Notes on piping</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#further_reading_chapter12"><i class="fa fa-check"></i><b>12.8</b> Further reading</a></li>
<li class="chapter" data-level="12.9" data-path="transform-data-manipulation.html"><a href="transform-data-manipulation.html#exercise-8"><i class="fa fa-check"></i><b>12.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ggplot-basic-visualizations.html"><a href="ggplot-basic-visualizations.html"><i class="fa fa-check"></i><b>13</b> Ggplot Basic Visualizations</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ggplot-basic-visualizations.html"><a href="ggplot-basic-visualizations.html#building-plots-ups"><i class="fa fa-check"></i><b>13.1</b> Building plots ups</a></li>
<li class="chapter" data-level="13.2" data-path="ggplot-basic-visualizations.html"><a href="ggplot-basic-visualizations.html#basic-plotting"><i class="fa fa-check"></i><b>13.2</b> Basic plotting</a></li>
<li class="chapter" data-level="13.3" data-path="ggplot-basic-visualizations.html"><a href="ggplot-basic-visualizations.html#changing-plot-labels"><i class="fa fa-check"></i><b>13.3</b> Changing plot labels</a></li>
<li class="chapter" data-level="13.4" data-path="ggplot-basic-visualizations.html"><a href="ggplot-basic-visualizations.html#small-multiples"><i class="fa fa-check"></i><b>13.4</b> Small Multiples</a></li>
<li class="chapter" data-level="13.5" data-path="ggplot-basic-visualizations.html"><a href="ggplot-basic-visualizations.html#plotting-subsets-of-data"><i class="fa fa-check"></i><b>13.5</b> Plotting subsets of data</a></li>
<li class="chapter" data-level="13.6" data-path="ggplot-basic-visualizations.html"><a href="ggplot-basic-visualizations.html#exercise-9"><i class="fa fa-check"></i><b>13.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="summarizing-data.html"><a href="summarizing-data.html"><i class="fa fa-check"></i><b>14</b> Summarizing Data</a>
<ul>
<li class="chapter" data-level="14.1" data-path="summarizing-data.html"><a href="summarizing-data.html#data-to-play-with"><i class="fa fa-check"></i><b>14.1</b> Data to Play With</a></li>
<li class="chapter" data-level="14.2" data-path="summarizing-data.html"><a href="summarizing-data.html#summarizing-data-by-group"><i class="fa fa-check"></i><b>14.2</b> Summarizing Data by Group</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="summarizing-data.html"><a href="summarizing-data.html#further-summarize-operations"><i class="fa fa-check"></i><b>14.2.1</b> Further Summarize Operations</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="summarizing-data.html"><a href="summarizing-data.html#pretty-tables-with-flextable"><i class="fa fa-check"></i><b>14.3</b> Pretty Tables with Flextable</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="summarizing-data.html"><a href="summarizing-data.html#uniting-columns"><i class="fa fa-check"></i><b>14.3.1</b> Uniting columns</a></li>
<li class="chapter" data-level="14.3.2" data-path="summarizing-data.html"><a href="summarizing-data.html#pretty-tables"><i class="fa fa-check"></i><b>14.3.2</b> Pretty tables</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="summarizing-data.html"><a href="summarizing-data.html#exercise-10"><i class="fa fa-check"></i><b>14.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html"><i class="fa fa-check"></i><b>15</b> Restructuring Your Data</a>
<ul>
<li class="chapter" data-level="15.1" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html#long-vs-wide-data"><i class="fa fa-check"></i><b>15.1</b> Long vs Wide Data</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html#long-data"><i class="fa fa-check"></i><b>15.1.1</b> Long Data</a></li>
<li class="chapter" data-level="15.1.2" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html#wide-data"><i class="fa fa-check"></i><b>15.1.2</b> Wide Data</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html#making-data-longer"><i class="fa fa-check"></i><b>15.2</b> Making Data Longer</a></li>
<li class="chapter" data-level="15.3" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html#making-data-wider"><i class="fa fa-check"></i><b>15.3</b> Making Data Wider</a></li>
<li class="chapter" data-level="15.4" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html#summary-5"><i class="fa fa-check"></i><b>15.4</b> Summary</a></li>
<li class="chapter" data-level="15.5" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html#further_reading_chapter15"><i class="fa fa-check"></i><b>15.5</b> Further reading</a></li>
<li class="chapter" data-level="15.6" data-path="restructuring-your-data.html"><a href="restructuring-your-data.html#exercise-11"><i class="fa fa-check"></i><b>15.6</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>Part 4: Visualization in R</b></span></li>
<li class="chapter" data-level="16" data-path="visualizations-for-env-chem.html"><a href="visualizations-for-env-chem.html"><i class="fa fa-check"></i><b>16</b> Visualizations for Env Chem</a>
<ul>
<li class="chapter" data-level="16.1" data-path="visualizations-for-env-chem.html"><a href="visualizations-for-env-chem.html#discrete-vs.-continuous-variables"><i class="fa fa-check"></i><b>16.1</b> Discrete vs. Continuous variables</a></li>
<li class="chapter" data-level="16.2" data-path="visualizations-for-env-chem.html"><a href="visualizations-for-env-chem.html#prerequisites"><i class="fa fa-check"></i><b>16.2</b> Prerequisites</a></li>
<li class="chapter" data-level="16.3" data-path="visualizations-for-env-chem.html"><a href="visualizations-for-env-chem.html#exercise-12"><i class="fa fa-check"></i><b>16.3</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html"><i class="fa fa-check"></i><b>17</b> Common Types of Graphs</a>
<ul>
<li class="chapter" data-level="17.1" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#bar-charts"><i class="fa fa-check"></i><b>17.1</b> Bar Charts</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#adding-error-bars"><i class="fa fa-check"></i><b>17.1.1</b> Adding Error Bars</a></li>
<li class="chapter" data-level="17.1.2" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#ordering-bar-charts"><i class="fa fa-check"></i><b>17.1.2</b> Ordering bar charts</a></li>
<li class="chapter" data-level="17.1.3" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#grouping-bar-charts"><i class="fa fa-check"></i><b>17.1.3</b> Grouping bar charts</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#box-plots"><i class="fa fa-check"></i><b>17.2</b> Box Plots</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#box-plot-alternatives"><i class="fa fa-check"></i><b>17.2.1</b> Box plot alternatives</a></li>
<li class="chapter" data-level="17.2.2" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#statistical-comparisons-between-groups"><i class="fa fa-check"></i><b>17.2.2</b> Statistical comparisons between groups</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#histograms"><i class="fa fa-check"></i><b>17.3</b> Histograms</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#multiple-histograms"><i class="fa fa-check"></i><b>17.3.1</b> Multiple histograms</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#scatter-plots"><i class="fa fa-check"></i><b>17.4</b> Scatter plots</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#marginal-plots"><i class="fa fa-check"></i><b>17.4.1</b> Marginal plots</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="common-types-of-graphs.html"><a href="common-types-of-graphs.html#exercise-13"><i class="fa fa-check"></i><b>17.5</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html"><i class="fa fa-check"></i><b>18</b> Customizing your plots</a>
<ul>
<li class="chapter" data-level="18.1" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#interactive-plots"><i class="fa fa-check"></i><b>18.1</b> Interactive Plots</a></li>
<li class="chapter" data-level="18.2" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#plot-themes"><i class="fa fa-check"></i><b>18.2</b> Plot Themes</a></li>
<li class="chapter" data-level="18.3" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#legends"><i class="fa fa-check"></i><b>18.3</b> Legends</a></li>
<li class="chapter" data-level="18.4" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#modifying-labels"><i class="fa fa-check"></i><b>18.4</b> Modifying labels</a></li>
<li class="chapter" data-level="18.5" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#modifying-axis"><i class="fa fa-check"></i><b>18.5</b> Modifying Axis</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#transforming-axis"><i class="fa fa-check"></i><b>18.5.1</b> Transforming axis</a></li>
<li class="chapter" data-level="18.5.2" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#limits"><i class="fa fa-check"></i><b>18.5.2</b> Limits</a></li>
<li class="chapter" data-level="18.5.3" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#axis-tickslabels"><i class="fa fa-check"></i><b>18.5.3</b> Axis ticks/labels</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#arranging-plots"><i class="fa fa-check"></i><b>18.6</b> Arranging plots</a></li>
<li class="chapter" data-level="18.7" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#anotating-plots"><i class="fa fa-check"></i><b>18.7</b> Anotating plots</a></li>
<li class="chapter" data-level="18.8" data-path="customizing-your-plots.html"><a href="customizing-your-plots.html#exercise-14"><i class="fa fa-check"></i><b>18.8</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>Part 5: Modelling in R</b></span></li>
<li class="chapter" data-level="19" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html"><i class="fa fa-check"></i><b>19</b> Modelling: Linear Regression</a>
<ul>
<li class="chapter" data-level="19.1" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#modelling-theory"><i class="fa fa-check"></i><b>19.1</b> Modelling Theory</a></li>
<li class="chapter" data-level="19.2" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#modelling-in-r"><i class="fa fa-check"></i><b>19.2</b> Modelling in R</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#base-r-linear-model"><i class="fa fa-check"></i><b>19.2.1</b> Base R Linear Model</a></li>
<li class="chapter" data-level="19.2.2" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#cleaning-up-model-ouputs"><i class="fa fa-check"></i><b>19.2.2</b> Cleaning up model ouputs</a></li>
<li class="chapter" data-level="19.2.3" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#glanced-outputs"><i class="fa fa-check"></i><b>19.2.3</b> Glanced outputs</a></li>
<li class="chapter" data-level="19.2.4" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#tidied-outputs"><i class="fa fa-check"></i><b>19.2.4</b> Tidied outputs</a></li>
<li class="chapter" data-level="19.2.5" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#augmented-outputs"><i class="fa fa-check"></i><b>19.2.5</b> Augmented outputs</a></li>
<li class="chapter" data-level="19.2.6" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#incorporating-weights-into-your-model"><i class="fa fa-check"></i><b>19.2.6</b> Incorporating weights into your model</a></li>
<li class="chapter" data-level="19.2.7" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#why-we-approach-modelling-this-way"><i class="fa fa-check"></i><b>19.2.7</b> Why we approach modelling this way</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#visualizing-models"><i class="fa fa-check"></i><b>19.3</b> Visualizing models</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#visualizing-residuals"><i class="fa fa-check"></i><b>19.3.1</b> Visualizing residuals</a></li>
<li class="chapter" data-level="19.3.2" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#plotting-residuals"><i class="fa fa-check"></i><b>19.3.2</b> Plotting residuals</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#calculating-concentrations"><i class="fa fa-check"></i><b>19.4</b> Calculating Concentrations</a></li>
<li class="chapter" data-level="19.5" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#summary-6"><i class="fa fa-check"></i><b>19.5</b> Summary</a></li>
<li class="chapter" data-level="19.6" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#further_reading_chapter19"><i class="fa fa-check"></i><b>19.6</b> Further reading</a></li>
<li class="chapter" data-level="19.7" data-path="modelling-linear-regression.html"><a href="modelling-linear-regression.html#exercise-15"><i class="fa fa-check"></i><b>19.7</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="modelling-multiple-linear-regressions.html"><a href="modelling-multiple-linear-regressions.html"><i class="fa fa-check"></i><b>20</b> Modelling: Multiple Linear Regressions</a>
<ul>
<li class="chapter" data-level="20.1" data-path="modelling-multiple-linear-regressions.html"><a href="modelling-multiple-linear-regressions.html#building-multiple-linear-regressions"><i class="fa fa-check"></i><b>20.1</b> Building Multiple Linear Regressions</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="modelling-multiple-linear-regressions.html"><a href="modelling-multiple-linear-regressions.html#dataset"><i class="fa fa-check"></i><b>20.1.1</b> Dataset</a></li>
<li class="chapter" data-level="20.1.2" data-path="modelling-multiple-linear-regressions.html"><a href="modelling-multiple-linear-regressions.html#regressions"><i class="fa fa-check"></i><b>20.1.2</b> Regressions</a></li>
<li class="chapter" data-level="20.1.3" data-path="modelling-multiple-linear-regressions.html"><a href="modelling-multiple-linear-regressions.html#slopes-and-intercepts"><i class="fa fa-check"></i><b>20.1.3</b> Slopes and Intercepts</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="modelling-multiple-linear-regressions.html"><a href="modelling-multiple-linear-regressions.html#using-regression-variables-for-inference"><i class="fa fa-check"></i><b>20.2</b> Using Regression Variables for Inference</a></li>
<li class="chapter" data-level="20.3" data-path="modelling-multiple-linear-regressions.html"><a href="modelling-multiple-linear-regressions.html#conclusion"><i class="fa fa-check"></i><b>20.3</b> Conclusion</a></li>
<li class="chapter" data-level="20.4" data-path="modelling-multiple-linear-regressions.html"><a href="modelling-multiple-linear-regressions.html#exercise-16"><i class="fa fa-check"></i><b>20.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html"><i class="fa fa-check"></i><b>21</b> Modelling: Non-Linear Regression</a>
<ul>
<li class="chapter" data-level="21.1" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html#experimental-background"><i class="fa fa-check"></i><b>21.1</b> Experimental Background</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html#annotating-maximal-values"><i class="fa fa-check"></i><b>21.1.1</b> Annotating maximal values</a></li>
<li class="chapter" data-level="21.1.2" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html#extracting-maximal-values"><i class="fa fa-check"></i><b>21.1.2</b> Extracting maximal values</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html#modelling-sigmoid-curve"><i class="fa fa-check"></i><b>21.2</b> Modelling Sigmoid Curve</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html#calculating-logistic-regression"><i class="fa fa-check"></i><b>21.2.1</b> Calculating Logistic Regression</a></li>
<li class="chapter" data-level="21.2.2" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html#extracting-model-parameters"><i class="fa fa-check"></i><b>21.2.2</b> Extracting model parameters</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html#summary-7"><i class="fa fa-check"></i><b>21.3</b> Summary</a></li>
<li class="chapter" data-level="21.4" data-path="modelling-non-linear-regression.html"><a href="modelling-non-linear-regression.html#exercise-17"><i class="fa fa-check"></i><b>21.4</b> Exercise</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Environmental Chemistry</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="transform-data-manipulation" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Chapter 12</span> Transform: Data Manipulation<a href="transform-data-manipulation.html#transform-data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Transformation encompasses any steps you take to manipulate, reshape, refine, or transform your data. We’ve already touched upon some useful transformation functions in previous example code snippets, such as the <code>mutate</code> function for adding columns. This section will explore some of the most useful functionalities of the <code>dplyr</code> package, explicitly introduce the pipe operator <code>%&gt;%</code>, and showcase how you can leverage these tools to quickly manipulate your data.</p>
<p>The essential <code>dplyr</code> functions are :</p>
<ul>
<li><code>mutate()</code> to create new columns/variables from existing data</li>
<li><code>arrange()</code> to reorder rows</li>
<li><code>filter()</code> to refine observations by their values (in other words by row)</li>
<li><code>select()</code> to pick variables by name (in other words by column)</li>
<li><code>summarize()</code> to collapse many values down to a single summary.</li>
</ul>
<p>We’ll go through each of these functions, for more details you can read <a href="https://r4ds.had.co.nz/transform.html">Chapter 3: Data Transformation</a> from <em>R for Data Science</em> which provides a more comprehensive breakdown of these functions. Note that the information here is based on a <code>tidyverse</code> approach, but this is only one way of doing things. See the <a href="transform-data-manipulation.html#further_reading_chapter12">Further reading</a> section for links to other suitable approaches to data transformation.</p>
<p>Let’s explore the functionality of <code>dplyr</code> using some flame absorption/emission spectroscopy (FAES) data from a <em>CHM317</em> lab. This data represents the emission signal of five sodium (Na)
standards measured in triplicate:</p>
<p>standards measured in triplicate:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="transform-data-manipulation.html#cb158-1" tabindex="-1"></a><span class="co"># Importing using tips from Import chapter</span></span>
<span id="cb158-2"><a href="transform-data-manipulation.html#cb158-2" tabindex="-1"></a>FAES <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">&quot;data/FAES.csv&quot;</span>)</span>
<span id="cb158-3"><a href="transform-data-manipulation.html#cb158-3" tabindex="-1"></a><span class="fu">head</span>(FAES)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##    ...1 std_Na_conc      replicate signal
##   &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 blank 0 ppm              1   502.
## 2     2 blank 0 ppm              2   592.
## 3     3 blank 0 ppm              3   581.
## 4     4 standard 0.1 ppm         1  5656.
## 5     5 standard 0.1 ppm         2  5654.
## 6     6 standard 0.1 ppm         3  5667.</code></pre>
<p>In this dataset you can see that two important aspects of the data, sample type (sample, blank or standard) and concentration are grouped in one column. We can use the separate function to separate these into two columns to facilitate further analysis.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="transform-data-manipulation.html#cb160-1" tabindex="-1"></a><span class="co"># Importing using tips from Import chapter</span></span>
<span id="cb160-2"><a href="transform-data-manipulation.html#cb160-2" tabindex="-1"></a>FAES <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">&quot;data/FAES.csv&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># see section on Pipe</span></span>
<span id="cb160-3"><a href="transform-data-manipulation.html#cb160-3" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> std_Na_conc,</span>
<span id="cb160-4"><a href="transform-data-manipulation.html#cb160-4" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;type&quot;</span>, <span class="st">&quot;conc_Na&quot;</span>, <span class="st">&quot;units&quot;</span>),</span>
<span id="cb160-5"><a href="transform-data-manipulation.html#cb160-5" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb160-6"><a href="transform-data-manipulation.html#cb160-6" tabindex="-1"></a>           <span class="at">convert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb160-7"><a href="transform-data-manipulation.html#cb160-7" tabindex="-1"></a></span>
<span id="cb160-8"><a href="transform-data-manipulation.html#cb160-8" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(FAES)</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-f13ea94f007a1ce2c7be" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f13ea94f007a1ce2c7be">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],["blank","blank","blank","standard","standard","standard","standard","standard","standard","standard","standard","standard","standard","standard","standard"],[0,0,0,0.1,0.1,0.1,0.2,0.2,0.2,0.5,0.5,0.5,1,1,1],["ppm","ppm","ppm","ppm","ppm","ppm","ppm","ppm","ppm","ppm","ppm","ppm","ppm","ppm","ppm"],[1,2,3,1,2,3,1,2,3,1,2,3,1,2,3],[502.3391,591.7768,581.4588,5656.342,5653.5584,5667.4387,9393.4167,9362.685799999999,9332.049800000001,20186.9033,20140.5115,20152.9856,30797.6935,30836.5239,30789.8266]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>...1<\/th>\n      <th>type<\/th>\n      <th>conc_Na<\/th>\n      <th>units<\/th>\n      <th>replicate<\/th>\n      <th>signal<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"...1","targets":1},{"name":"type","targets":2},{"name":"conc_Na","targets":3},{"name":"units","targets":4},{"name":"replicate","targets":5},{"name":"signal","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p><strong>Note</strong> the use of <code>convert = TRUE</code> in the <code>separate()</code> call. This runs a type convert on new columns. If we didn’t include this, the <code>conc_Na</code> column would be of type character because the numbers originated from a string. <code>convert()</code> ensures they’re converted to numeric. <strong>Always use <code>convert = TRUE</code></strong> when you separate columns.</p>
<div id="selecting-by-row-or-value" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Selecting by row or value<a href="transform-data-manipulation.html#selecting-by-row-or-value" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>filter()</code> allows up to subset our data based on observation (row) values.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="transform-data-manipulation.html#cb161-1" tabindex="-1"></a><span class="fu">filter</span>(FAES, conc_Na <span class="sc">==</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 6
##    ...1 type  conc_Na units replicate signal
##   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 blank       0 ppm           1   502.
## 2     2 blank       0 ppm           2   592.
## 3     3 blank       0 ppm           3   581.</code></pre>
<p>Note how we need to pass logical operations to <code>filter()</code> to specify which rows we want to select. In the above code, we used <code>filter()</code> to get all rows where the concentration of sodium is equal to 0 (<code>== 0</code>). Note the presence of two equal signs (<code>==</code>). In R one equal sign (<code>=</code>) is used to pass an argument, two equal signs (<code>==</code>) is the logical operation “is equal” and is used to test equality (i.e. that both sides have the same value). A frequent mistake is to use <code>=</code> instead of <code>==</code> when testing for equality.</p>
<div id="logical-operators" class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Logical operators<a href="transform-data-manipulation.html#logical-operators" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>filter()</code> can use other <em>relational</em> and <em>logical</em> operators or combinations thereof. Relational operators compare values and logical operators carry out Boolean operations (TRUE or FALSE). Logical operators are used to combine multiple relational operators… let’s just list what they are and how we can use them:</p>
<table>
<thead>
<tr class="header">
<th align="left">Operator</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">&gt;</td>
<td align="left">relational</td>
<td align="left">Less than</td>
</tr>
<tr class="even">
<td align="left">&lt;</td>
<td align="left">relational</td>
<td align="left">Greater than</td>
</tr>
<tr class="odd">
<td align="left">&lt;=</td>
<td align="left">relational</td>
<td align="left">Less than or equal to</td>
</tr>
<tr class="even">
<td align="left">&gt;=</td>
<td align="left">relational</td>
<td align="left">Greater than or equal to</td>
</tr>
<tr class="odd">
<td align="left">==</td>
<td align="left">relational</td>
<td align="left">Equal to</td>
</tr>
<tr class="even">
<td align="left">!=</td>
<td align="left">relational</td>
<td align="left">Not equal to</td>
</tr>
<tr class="odd">
<td align="left">&amp;</td>
<td align="left">logical</td>
<td align="left">AND</td>
</tr>
<tr class="even">
<td align="left">!</td>
<td align="left">logical</td>
<td align="left">NOT</td>
</tr>
<tr class="odd">
<td align="left">|</td>
<td align="left">logical</td>
<td align="left">OR</td>
</tr>
<tr class="even">
<td align="left">is.na()</td>
<td align="left">function</td>
<td align="left">Checks for missing values, TRUE if NA</td>
</tr>
</tbody>
</table>
<ul>
<li>Selecting all signals below a threshold value</li>
</ul>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="transform-data-manipulation.html#cb163-1" tabindex="-1"></a><span class="fu">filter</span>(FAES, signal <span class="sc">&lt;</span> <span class="dv">4450</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 6
##    ...1 type  conc_Na units replicate signal
##   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 blank       0 ppm           1   502.
## 2     2 blank       0 ppm           2   592.
## 3     3 blank       0 ppm           3   581.</code></pre>
<ul>
<li>Selecting signals between values</li>
</ul>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="transform-data-manipulation.html#cb165-1" tabindex="-1"></a><span class="fu">filter</span>(FAES, signal <span class="sc">&gt;=</span> <span class="dv">4450</span> <span class="sc">&amp;</span> signal <span class="sc">&lt;</span> <span class="dv">8150</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 6
##    ...1 type     conc_Na units replicate signal
##   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1     4 standard     0.1 ppm           1  5656.
## 2     5 standard     0.1 ppm           2  5654.
## 3     6 standard     0.1 ppm           3  5667.</code></pre>
<ul>
<li>Selecting all other replicates other than replicate <code>2</code></li>
</ul>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="transform-data-manipulation.html#cb167-1" tabindex="-1"></a><span class="fu">filter</span>(FAES, replicate <span class="sc">!=</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 6
##     ...1 type     conc_Na units replicate signal
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
##  1     1 blank        0   ppm           1   502.
##  2     3 blank        0   ppm           3   581.
##  3     4 standard     0.1 ppm           1  5656.
##  4     6 standard     0.1 ppm           3  5667.
##  5     7 standard     0.2 ppm           1  9393.
##  6     9 standard     0.2 ppm           3  9332.
##  7    10 standard     0.5 ppm           1 20187.
##  8    12 standard     0.5 ppm           3 20153.
##  9    13 standard     1   ppm           1 30798.
## 10    15 standard     1   ppm           3 30790.</code></pre>
<ul>
<li>selecting the first standard replicate OR any of the blanks.</li>
</ul>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="transform-data-manipulation.html#cb169-1" tabindex="-1"></a><span class="fu">filter</span>(FAES, (type <span class="sc">==</span> <span class="st">&quot;standard&quot;</span> <span class="sc">&amp;</span> replicate <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|</span> (type <span class="sc">==</span> <span class="st">&quot;blank&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 7 × 6
##    ...1 type     conc_Na units replicate signal
##   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 blank        0   ppm           1   502.
## 2     2 blank        0   ppm           2   592.
## 3     3 blank        0   ppm           3   581.
## 4     4 standard     0.1 ppm           1  5656.
## 5     7 standard     0.2 ppm           1  9393.
## 6    10 standard     0.5 ppm           1 20187.
## 7    13 standard     1   ppm           1 30798.</code></pre>
<ul>
<li>Removing any missing values (<code>NA</code>) using <code>is.na()</code>. Note there are no missing values in our data set so nothing will be removed, if we removed the NOT operator (<code>!</code>) we would have selected all rows <em>with</em> missing values.</li>
</ul>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="transform-data-manipulation.html#cb171-1" tabindex="-1"></a><span class="fu">filter</span>(FAES, <span class="sc">!</span><span class="fu">is.na</span>(signal))</span></code></pre></div>
<pre><code>## # A tibble: 15 × 6
##     ...1 type     conc_Na units replicate signal
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
##  1     1 blank        0   ppm           1   502.
##  2     2 blank        0   ppm           2   592.
##  3     3 blank        0   ppm           3   581.
##  4     4 standard     0.1 ppm           1  5656.
##  5     5 standard     0.1 ppm           2  5654.
##  6     6 standard     0.1 ppm           3  5667.
##  7     7 standard     0.2 ppm           1  9393.
##  8     8 standard     0.2 ppm           2  9363.
##  9     9 standard     0.2 ppm           3  9332.
## 10    10 standard     0.5 ppm           1 20187.
## 11    11 standard     0.5 ppm           2 20141.
## 12    12 standard     0.5 ppm           3 20153.
## 13    13 standard     1   ppm           1 30798.
## 14    14 standard     1   ppm           2 30837.
## 15    15 standard     1   ppm           3 30790.</code></pre>
<p>These are just some examples, but you can combine the logical operators in any way that works for you. Likewise, there are multiple combinations that will yield the same result, it’s up to you do figure out which works best for you.</p>
</div>
</div>
<div id="arranging-rows" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Arranging rows<a href="transform-data-manipulation.html#arranging-rows" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>arrange()</code> reorders the rows based on the value you passed to it. By default it arranges the specified values into ascending order. Let’s arrange our data our data by increasing order of signal value:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="transform-data-manipulation.html#cb173-1" tabindex="-1"></a><span class="fu">arrange</span>( FAES, signal)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 6
##     ...1 type     conc_Na units replicate signal
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
##  1     1 blank        0   ppm           1   502.
##  2     3 blank        0   ppm           3   581.
##  3     2 blank        0   ppm           2   592.
##  4     5 standard     0.1 ppm           2  5654.
##  5     4 standard     0.1 ppm           1  5656.
##  6     6 standard     0.1 ppm           3  5667.
##  7     9 standard     0.2 ppm           3  9332.
##  8     8 standard     0.2 ppm           2  9363.
##  9     7 standard     0.2 ppm           1  9393.
## 10    11 standard     0.5 ppm           2 20141.
## 11    12 standard     0.5 ppm           3 20153.
## 12    10 standard     0.5 ppm           1 20187.
## 13    15 standard     1   ppm           3 30790.
## 14    13 standard     1   ppm           1 30798.
## 15    14 standard     1   ppm           2 30837.</code></pre>
<p>Since our original <code>FAES</code> data is already arranged by increasing <code>conc_Na</code> and <code>replicate</code>, let’s inverse that order by arranging <code>conc_Na</code> into descending order using the <code>desc()</code> function WHILE arranging the <code>signal</code> values in ascending order:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="transform-data-manipulation.html#cb175-1" tabindex="-1"></a><span class="co"># Note the order of precedence (left-to-right)</span></span>
<span id="cb175-2"><a href="transform-data-manipulation.html#cb175-2" tabindex="-1"></a><span class="fu">arrange</span>(FAES, <span class="fu">desc</span>(conc_Na), signal)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 6
##     ...1 type     conc_Na units replicate signal
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
##  1    15 standard     1   ppm           3 30790.
##  2    13 standard     1   ppm           1 30798.
##  3    14 standard     1   ppm           2 30837.
##  4    11 standard     0.5 ppm           2 20141.
##  5    12 standard     0.5 ppm           3 20153.
##  6    10 standard     0.5 ppm           1 20187.
##  7     9 standard     0.2 ppm           3  9332.
##  8     8 standard     0.2 ppm           2  9363.
##  9     7 standard     0.2 ppm           1  9393.
## 10     5 standard     0.1 ppm           2  5654.
## 11     4 standard     0.1 ppm           1  5656.
## 12     6 standard     0.1 ppm           3  5667.
## 13     1 blank        0   ppm           1   502.
## 14     3 blank        0   ppm           3   581.
## 15     2 blank        0   ppm           2   592.</code></pre>
<p>Just note with <code>arrange()</code> that <code>NA</code> values will always be placed at the bottom, whether you use <code>desc()</code> or not.</p>
</div>
<div id="selecting-column-name" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Selecting column name<a href="transform-data-manipulation.html#selecting-column-name" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>select()</code> allows you to readily select columns by name. Note however that it will always return a tibble, even if you only select one variable/column.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="transform-data-manipulation.html#cb177-1" tabindex="-1"></a><span class="fu">select</span>(FAES, signal)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 1
##    signal
##     &lt;dbl&gt;
##  1   502.
##  2   592.
##  3   581.
##  4  5656.
##  5  5654.
##  6  5667.
##  7  9393.
##  8  9363.
##  9  9332.
## 10 20187.
## 11 20141.
## 12 20153.
## 13 30798.
## 14 30837.
## 15 30790.</code></pre>
<p>You can also select multiple columns using the same operators and helper functions described in <a href="tidying-your-data.html#tidying-your-data">Tidying Your Data</a>:.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="transform-data-manipulation.html#cb179-1" tabindex="-1"></a><span class="fu">select</span>(FAES, conc_Na<span class="sc">:</span>replicate)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 3
##    conc_Na units replicate
##      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
##  1     0   ppm           1
##  2     0   ppm           2
##  3     0   ppm           3
##  4     0.1 ppm           1
##  5     0.1 ppm           2
##  6     0.1 ppm           3
##  7     0.2 ppm           1
##  8     0.2 ppm           2
##  9     0.2 ppm           3
## 10     0.5 ppm           1
## 11     0.5 ppm           2
## 12     0.5 ppm           3
## 13     1   ppm           1
## 14     1   ppm           2
## 15     1   ppm           3</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="transform-data-manipulation.html#cb181-1" tabindex="-1"></a><span class="co"># Getting columns containing the character &quot;p&quot;</span></span>
<span id="cb181-2"><a href="transform-data-manipulation.html#cb181-2" tabindex="-1"></a><span class="fu">select</span>(FAES, <span class="fu">contains</span>(<span class="st">&quot;p&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 15 × 2
##    type     replicate
##    &lt;chr&gt;        &lt;dbl&gt;
##  1 blank            1
##  2 blank            2
##  3 blank            3
##  4 standard         1
##  5 standard         2
##  6 standard         3
##  7 standard         1
##  8 standard         2
##  9 standard         3
## 10 standard         1
## 11 standard         2
## 12 standard         3
## 13 standard         1
## 14 standard         2
## 15 standard         3</code></pre>
</div>
<div id="deleting-columns-or-rows" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Deleting Columns or Rows<a href="transform-data-manipulation.html#deleting-columns-or-rows" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>While the process of selecting and filtering data is pivotal in data analysis, there are instances when you may need to remove specific columns or rows entirely. This is useful especially when you’re dealing with redundant or irrelevant data that might clutter your analysis.</p>
<div id="deleting-columns" class="section level3 hasAnchor" number="12.4.1">
<h3><span class="header-section-number">12.4.1</span> Deleting columns<a href="transform-data-manipulation.html#deleting-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To delete a column, you can use the <code>select()</code> function with the <code>-</code> sign before the column name you want to remove:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="transform-data-manipulation.html#cb183-1" tabindex="-1"></a><span class="co"># This will remove the &#39;signal&#39; column from the FAES dataset</span></span>
<span id="cb183-2"><a href="transform-data-manipulation.html#cb183-2" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">select</span>(FAES, <span class="sc">-</span>signal))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##    ...1 type     conc_Na units replicate
##   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
## 1     1 blank        0   ppm           1
## 2     2 blank        0   ppm           2
## 3     3 blank        0   ppm           3
## 4     4 standard     0.1 ppm           1
## 5     5 standard     0.1 ppm           2
## 6     6 standard     0.1 ppm           3</code></pre>
<p>Multiple columns can be deleted by providing more column names after the <code>-</code> sign:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="transform-data-manipulation.html#cb185-1" tabindex="-1"></a><span class="co"># Deleting both &#39;signal&#39; and &#39;replicate&#39; columns from the FAES dataset</span></span>
<span id="cb185-2"><a href="transform-data-manipulation.html#cb185-2" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">select</span>(FAES, <span class="sc">-</span><span class="fu">c</span>(signal, replicate)))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##    ...1 type     conc_Na units
##   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;
## 1     1 blank        0   ppm  
## 2     2 blank        0   ppm  
## 3     3 blank        0   ppm  
## 4     4 standard     0.1 ppm  
## 5     5 standard     0.1 ppm  
## 6     6 standard     0.1 ppm</code></pre>
</div>
<div id="deleting-rows" class="section level3 hasAnchor" number="12.4.2">
<h3><span class="header-section-number">12.4.2</span> Deleting rows<a href="transform-data-manipulation.html#deleting-rows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To delete rows, the <code>filter()</code> function can be used in conjunction with relational or logical conditions that define the rows you wish to exclude:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="transform-data-manipulation.html#cb187-1" tabindex="-1"></a><span class="co"># This will remove rows where &#39;signal&#39; values are less than 20000</span></span>
<span id="cb187-2"><a href="transform-data-manipulation.html#cb187-2" tabindex="-1"></a><span class="fu">filter</span>(FAES, <span class="sc">!</span>(signal <span class="sc">&lt;</span> <span class="dv">20000</span>))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    ...1 type     conc_Na units replicate signal
##   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1    10 standard     0.5 ppm           1 20187.
## 2    11 standard     0.5 ppm           2 20141.
## 3    12 standard     0.5 ppm           3 20153.
## 4    13 standard     1   ppm           1 30798.
## 5    14 standard     1   ppm           2 30837.
## 6    15 standard     1   ppm           3 30790.</code></pre>
<p>The key here is the use of the <code>!</code> (NOT) operator which excludes rows that meet the specified condition.</p>
</div>
</div>
<div id="adding-new-variables" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> Adding new variables<a href="transform-data-manipulation.html#adding-new-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>mutate()</code> allows you to add new variables (read columns) to your existing data set. It’ll probably be the workhorse function you’ll use during your data transformation as you can readily pass other functions and mathematical operators to it to transform your data. let’s suppose that our standards were diluted by a factor of 10, we can add a new column for this:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="transform-data-manipulation.html#cb189-1" tabindex="-1"></a><span class="fu">mutate</span>(FAES, <span class="st">&quot;dil_fct&quot;</span> <span class="ot">=</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 7
##     ...1 type     conc_Na units replicate signal dil_fct
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1     1 blank        0   ppm           1   502.      10
##  2     2 blank        0   ppm           2   592.      10
##  3     3 blank        0   ppm           3   581.      10
##  4     4 standard     0.1 ppm           1  5656.      10
##  5     5 standard     0.1 ppm           2  5654.      10
##  6     6 standard     0.1 ppm           3  5667.      10
##  7     7 standard     0.2 ppm           1  9393.      10
##  8     8 standard     0.2 ppm           2  9363.      10
##  9     9 standard     0.2 ppm           3  9332.      10
## 10    10 standard     0.5 ppm           1 20187.      10
## 11    11 standard     0.5 ppm           2 20141.      10
## 12    12 standard     0.5 ppm           3 20153.      10
## 13    13 standard     1   ppm           1 30798.      10
## 14    14 standard     1   ppm           2 30837.      10
## 15    15 standard     1   ppm           3 30790.      10</code></pre>
<p>We can also create multiple columns in the same <code>mutate()</code> call:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="transform-data-manipulation.html#cb191-1" tabindex="-1"></a><span class="fu">mutate</span>(FAES, </span>
<span id="cb191-2"><a href="transform-data-manipulation.html#cb191-2" tabindex="-1"></a>       <span class="at">dil_fct =</span> <span class="dv">10</span>, </span>
<span id="cb191-3"><a href="transform-data-manipulation.html#cb191-3" tabindex="-1"></a>       <span class="at">adj_signal =</span> signal <span class="sc">*</span> dil_fct)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 8
##     ...1 type     conc_Na units replicate signal dil_fct adj_signal
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1     1 blank        0   ppm           1   502.      10      5023.
##  2     2 blank        0   ppm           2   592.      10      5918.
##  3     3 blank        0   ppm           3   581.      10      5815.
##  4     4 standard     0.1 ppm           1  5656.      10     56563.
##  5     5 standard     0.1 ppm           2  5654.      10     56536.
##  6     6 standard     0.1 ppm           3  5667.      10     56674.
##  7     7 standard     0.2 ppm           1  9393.      10     93934.
##  8     8 standard     0.2 ppm           2  9363.      10     93627.
##  9     9 standard     0.2 ppm           3  9332.      10     93320.
## 10    10 standard     0.5 ppm           1 20187.      10    201869.
## 11    11 standard     0.5 ppm           2 20141.      10    201405.
## 12    12 standard     0.5 ppm           3 20153.      10    201530.
## 13    13 standard     1   ppm           1 30798.      10    307977.
## 14    14 standard     1   ppm           2 30837.      10    308365.
## 15    15 standard     1   ppm           3 30790.      10    307898.</code></pre>
<p>A Couple of things to note:</p>
<ol style="list-style-type: decimal">
<li>The variable we’re creating needs to be in quotation marks, hence <code>dil_fct</code> for our dilution factor variable</li>
<li>The variables we’re referencing do not need to be in quotation marks; hence <code>signal</code> because this variable already exists.</li>
<li>Note the order of precedence: <code>dil_fct</code> is created first so we can reference in the second argument, we would get an error if we swapped the order.</li>
</ol>
<div id="mutate-with-a-condition" class="section level3 hasAnchor" number="12.5.1">
<h3><span class="header-section-number">12.5.1</span> Mutate with a condition<a href="transform-data-manipulation.html#mutate-with-a-condition" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In data analysis, there are often scenarios where we want to categorize or re-label values based on certain conditions. The <code>case_when()</code> function, provided by the <code>dplyr</code> package, which was introduced in the <a href="loops-and-functions-in-r.html#piping-conditional-statements">Piping conditional statements</a> section, offers a versatile and readable solution for handling these multiple conditions.</p>
<p>The syntax for <code>case_when()</code> is straightforward: for each condition, you specify the logical test followed by the tilde (~) operator, and then the value or expression to return if the condition is <code>TRUE</code>.</p>
<p>With our FAES data, say you want to label each <code>conc_Na</code> as “Low”, “Medium”, or “High” based on its value. You can use <code>case_when()</code> within <code>mutate()</code> as follows:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="transform-data-manipulation.html#cb193-1" tabindex="-1"></a><span class="fu">mutate</span>(FAES, </span>
<span id="cb193-2"><a href="transform-data-manipulation.html#cb193-2" tabindex="-1"></a>       <span class="at">conc_Na_level =</span> <span class="fu">case_when</span>(</span>
<span id="cb193-3"><a href="transform-data-manipulation.html#cb193-3" tabindex="-1"></a>         conc_Na <span class="sc">&lt;</span> <span class="fl">0.2</span> <span class="sc">~</span> <span class="st">&quot;Low&quot;</span>,</span>
<span id="cb193-4"><a href="transform-data-manipulation.html#cb193-4" tabindex="-1"></a>         conc_Na <span class="sc">&lt;</span> <span class="fl">0.4</span> <span class="sc">~</span> <span class="st">&quot;Medium&quot;</span>,</span>
<span id="cb193-5"><a href="transform-data-manipulation.html#cb193-5" tabindex="-1"></a>         <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;High&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 15 × 7
##     ...1 type     conc_Na units replicate signal conc_Na_level
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;        
##  1     1 blank        0   ppm           1   502. Low          
##  2     2 blank        0   ppm           2   592. Low          
##  3     3 blank        0   ppm           3   581. Low          
##  4     4 standard     0.1 ppm           1  5656. Low          
##  5     5 standard     0.1 ppm           2  5654. Low          
##  6     6 standard     0.1 ppm           3  5667. Low          
##  7     7 standard     0.2 ppm           1  9393. Medium       
##  8     8 standard     0.2 ppm           2  9363. Medium       
##  9     9 standard     0.2 ppm           3  9332. Medium       
## 10    10 standard     0.5 ppm           1 20187. High         
## 11    11 standard     0.5 ppm           2 20141. High         
## 12    12 standard     0.5 ppm           3 20153. High         
## 13    13 standard     1   ppm           1 30798. High         
## 14    14 standard     1   ppm           2 30837. High         
## 15    15 standard     1   ppm           3 30790. High</code></pre>
<p>For those interested in exploring further, there’s a similar function called <code>ifelse()</code> which provides conditional transformations in R. You can learn more about it in the <a href="r-coding-basics.html#conditional-statements">Conditional Statements</a> section in this resource or in the documentation for the ifelse statement that can be found <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/ifelse">here</a>.</p>
</div>
<div id="useful-mutate-function" class="section level3 hasAnchor" number="12.5.2">
<h3><span class="header-section-number">12.5.2</span> Useful mutate function<a href="transform-data-manipulation.html#useful-mutate-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are a myriad of functions you can make use of with the mutate function. Here are some of the mathematical operators available in R:</p>
<table>
<colgroup>
<col width="23%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Operator.Function</th>
<th align="left">Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">+</td>
<td align="left">additon</td>
</tr>
<tr class="even">
<td align="left">-</td>
<td align="left">subtraction</td>
</tr>
<tr class="odd">
<td align="left">*</td>
<td align="left">multiplication</td>
</tr>
<tr class="even">
<td align="left">/</td>
<td align="left">division</td>
</tr>
<tr class="odd">
<td align="left">^</td>
<td align="left">exponent; to the power of…</td>
</tr>
<tr class="even">
<td align="left">log()</td>
<td align="left">returns the specified base-log; see also log10() and log2()</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="group-and-summarize-data" class="section level2 hasAnchor" number="12.6">
<h2><span class="header-section-number">12.6</span> Group and summarize data<a href="transform-data-manipulation.html#group-and-summarize-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>summarize</code> effectively summarizes your data based on functions you’ve passed to it. Looking at our <code>FAES</code> data we’d might want the mean and standard deviation of the triplicate signals. Let’s see what happens when we apply the summarize function straight up:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="transform-data-manipulation.html#cb195-1" tabindex="-1"></a><span class="fu">summarise</span>(FAES, <span class="st">&quot;mean&quot;</span> <span class="ot">=</span> <span class="fu">mean</span>(signal), <span class="st">&quot;stdDev&quot;</span> <span class="ot">=</span> <span class="fu">sd</span>(signal))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##     mean stdDev
##    &lt;dbl&gt;  &lt;dbl&gt;
## 1 13310. 11242.</code></pre>
<p>This doesn’t look like what we wanted. What we got was the mean and standard deviation of <em>all</em> of the signals, regardless of the concentration of the standard. Also note how we’ve lost the other columns/variables and are only left with the mean and stdDev. This is all because we need to <strong>group</strong> our observations by a variable. We can do this by using the <code>group_by()</code> function.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="transform-data-manipulation.html#cb197-1" tabindex="-1"></a>groupedFAES <span class="ot">&lt;-</span> <span class="fu">group_by</span>(FAES, type, conc_Na)</span>
<span id="cb197-2"><a href="transform-data-manipulation.html#cb197-2" tabindex="-1"></a><span class="fu">summarise</span>(groupedFAES, <span class="st">&quot;mean&quot;</span> <span class="ot">=</span> <span class="fu">mean</span>(signal), <span class="st">&quot;stdDev&quot;</span> <span class="ot">=</span> <span class="fu">sd</span>(signal))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;type&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 5 × 4
## # Groups:   type [2]
##   type     conc_Na   mean stdDev
##   &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 blank        0     559.  48.9 
## 2 standard     0.1  5659.   7.34
## 3 standard     0.2  9363.  30.7 
## 4 standard     0.5 20160.  24.0 
## 5 standard     1   30808.  25.0</code></pre>
<p>Here we’ve created a new data set, <code>groupedFAES</code>, that we grouped by the variables <code>type</code> and <code>conc_Na</code> so we could get the mean and standard deviation of each group. Note the multiple levels of grouping. For this data set we could have omitted the <code>type</code> variable, but in larger datasets you may have multiple groupings (i.e. from different location), so you can group by multiple variables to get smaller groups.</p>
<div id="useful-summarize-functions" class="section level3 hasAnchor" number="12.6.1">
<h3><span class="header-section-number">12.6.1</span> Useful summarize functions<a href="transform-data-manipulation.html#useful-summarize-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ve used the <code>mean()</code> and <code>sd()</code> functions above, but there are a host of other useful functions you can use in conjunction with summarize. See <strong>Useful Functions</strong> in the <code>summarise()</code> documentation (enter <code>?summarise</code>) in the console. This is also discussed in more depth in the <a href="summarizing-data.html#summarizing-data">Summarizing Data</a> chapter.</p>
</div>
</div>
<div id="the-pipe-chaining-functions-together" class="section level2 hasAnchor" number="12.7">
<h2><span class="header-section-number">12.7</span> The Pipe: Chaining Functions Together<a href="transform-data-manipulation.html#the-pipe-chaining-functions-together" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With the tools presented here we could do a decent job analyzing our <code>FAES</code> data. Let’s say we wanted to subtract the mean of the <code>blank</code> from each <code>standard</code> signal and then summarize those results. It would look something like this:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="transform-data-manipulation.html#cb200-1" tabindex="-1"></a>blank <span class="ot">&lt;-</span> <span class="fu">filter</span>(FAES, type <span class="sc">==</span> <span class="st">&quot;blank&quot;</span>)</span>
<span id="cb200-2"><a href="transform-data-manipulation.html#cb200-2" tabindex="-1"></a>meanBlank <span class="ot">&lt;-</span> <span class="fu">summarize</span>(blank, <span class="fu">mean</span>(signal))</span>
<span id="cb200-3"><a href="transform-data-manipulation.html#cb200-3" tabindex="-1"></a>meanBlank <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(meanBlank)</span>
<span id="cb200-4"><a href="transform-data-manipulation.html#cb200-4" tabindex="-1"></a></span>
<span id="cb200-5"><a href="transform-data-manipulation.html#cb200-5" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;The mean signal from the blank triplicate is:&quot;</span>, meanBlank)</span></code></pre></div>
<pre><code>## [1] &quot;The mean signal from the blank triplicate is: 558.5249&quot;</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="transform-data-manipulation.html#cb202-1" tabindex="-1"></a>stds_1 <span class="ot">&lt;-</span> <span class="fu">filter</span>(FAES, type <span class="sc">==</span> <span class="st">&quot;standard&quot;</span>)</span>
<span id="cb202-2"><a href="transform-data-manipulation.html#cb202-2" tabindex="-1"></a>stds_2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(stds_1, <span class="st">&quot;cor_sig&quot;</span> <span class="ot">=</span> signal <span class="sc">-</span> meanBlank)</span>
<span id="cb202-3"><a href="transform-data-manipulation.html#cb202-3" tabindex="-1"></a>stds_3 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(stds_2, conc_Na)</span>
<span id="cb202-4"><a href="transform-data-manipulation.html#cb202-4" tabindex="-1"></a>stds_4 <span class="ot">&lt;-</span> <span class="fu">summarize</span>(stds_3, <span class="st">&quot;mean&quot;</span> <span class="ot">=</span> <span class="fu">mean</span>(cor_sig), <span class="st">&quot;stdDev&quot;</span> <span class="ot">=</span> <span class="fu">sd</span>(cor_sig))</span>
<span id="cb202-5"><a href="transform-data-manipulation.html#cb202-5" tabindex="-1"></a>stds_4</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   conc_Na   mean stdDev
##     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     0.1  5101.   7.34
## 2     0.2  8804.  30.7 
## 3     0.5 19602.  24.0 
## 4     1   30249.  25.0</code></pre>
<p>While the code above did its job, it’s certainly wasn’t easy to type and certainly not easy to read. At every step of the way we’ve saved our updated data outputs to a new variable (<code>stds_1</code>, <code>stds_2</code>, etc.). However, most of these intermediates aren’t important, and moreover the repetitive names clutter our code. As the code above is written, we’ve had to pay special attention to the variable suffix to make sure we’re calling the correct data set as our code has progresses. An alternative would be to reassign the outputs back to the original variable name (i.e. <code>stds_1 &lt;- mutate(stds_1, ...)</code>), but that doesn’t solve the issue of readability as there’s still redundant assigning.</p>
<p>A solution for this is the pipe operator <code>%&gt;%</code> ( pronounced as “then”), an incredibly useful tool for writing more legible and understandable code. The pipe basically changes how you read code to emphasize the functions you’re working with by passing the intermediate steps to hidden processes in the background. Re-writing the code above, we’d get something like:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="transform-data-manipulation.html#cb204-1" tabindex="-1"></a>meanBlank <span class="ot">&lt;-</span> FAES <span class="sc">%&gt;%</span></span>
<span id="cb204-2"><a href="transform-data-manipulation.html#cb204-2" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span><span class="st">&quot;blank&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb204-3"><a href="transform-data-manipulation.html#cb204-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">mean</span>(signal)) <span class="sc">%&gt;%</span></span>
<span id="cb204-4"><a href="transform-data-manipulation.html#cb204-4" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb204-5"><a href="transform-data-manipulation.html#cb204-5" tabindex="-1"></a></span>
<span id="cb204-6"><a href="transform-data-manipulation.html#cb204-6" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;The mean signal from the blank triplicate is:&quot;</span>, meanBlank)</span></code></pre></div>
<pre><code>## [1] &quot;The mean signal from the blank triplicate is: 558.5249&quot;</code></pre>
<p>Things may look a bit different, but our underlying code hasn’t changed much. What’s happening is the pipe operator passes the output to the first argument of the next function. So the output of <code>filter...</code> is passed to the first argument of <code>sumamrise...</code>, and the argument we specified in <code>summarise</code> is actually the <em>second</em> argument it receives. You’re probably wondering how hiding stuff makes your code more legible, but think of <code>%&gt;%</code> as being equivalent to “then”. We can read our code as:</p>
<blockquote>
<p>“Take the <code>FAES</code> dataset, <em>then</em> filter for <code>type == "blank"</code> <em>then</em> collapse the dataset to the mean <code>signal</code> value and <em>then</em> convert to numeric value <em>then</em> pass this final output to the new variable <code>meanBlank</code>.”</p>
</blockquote>
<p>Not only is the pipe less typing, but the emphasis is on the functions so you can better understand what you’re doing vs. where all the intermediates are going. Extending our piping to the second batch of code we get:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="transform-data-manipulation.html#cb206-1" tabindex="-1"></a>stds <span class="ot">&lt;-</span> FAES <span class="sc">%&gt;%</span></span>
<span id="cb206-2"><a href="transform-data-manipulation.html#cb206-2" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;standard&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb206-3"><a href="transform-data-manipulation.html#cb206-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">&quot;cor_sig&quot;</span> <span class="ot">=</span> signal <span class="sc">-</span> meanBlank) <span class="sc">%&gt;%</span> </span>
<span id="cb206-4"><a href="transform-data-manipulation.html#cb206-4" tabindex="-1"></a>  <span class="fu">group_by</span>(conc_Na) <span class="sc">%&gt;%</span></span>
<span id="cb206-5"><a href="transform-data-manipulation.html#cb206-5" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="st">&quot;mean&quot;</span> <span class="ot">=</span> <span class="fu">mean</span>(cor_sig), <span class="st">&quot;stdDev&quot;</span> <span class="ot">=</span> <span class="fu">sd</span>(cor_sig))</span>
<span id="cb206-6"><a href="transform-data-manipulation.html#cb206-6" tabindex="-1"></a></span>
<span id="cb206-7"><a href="transform-data-manipulation.html#cb206-7" tabindex="-1"></a>stds</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   conc_Na   mean stdDev
##     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     0.1  5101.   7.34
## 2     0.2  8804.  30.7 
## 3     0.5 19602.  24.0 
## 4     1   30249.  25.0</code></pre>
<p>Same thing. The underlying code hasn’t changed much, but it’s much more legible and we can clearly see we’re subtracting the <code>meanBlank</code> value from each measured signal then summarizing the corrected signals.</p>
<div id="notes-on-piping" class="section level3 hasAnchor" number="12.7.1">
<h3><span class="header-section-number">12.7.1</span> Notes on piping<a href="transform-data-manipulation.html#notes-on-piping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The pipe is great and especially useful with <em>tidyverse</em> packages, but it does have some limitations:</p>
<ul>
<li>You can’t easily extract intermediate steps. So you’ll need to break up your pipping chain to output any intermediate steps you can.</li>
<li>The benefit of piping is legibility; this goes away as you increase the number of steps as you lose track of what’s going on. Keep the piping short and thematically similar.</li>
<li>Pipes are linear, if you have multiple inputs or outputs you should consider an alternative approach.</li>
</ul>
</div>
</div>
<div id="further_reading_chapter12" class="section level2 hasAnchor" number="12.8">
<h2><span class="header-section-number">12.8</span> Further reading<a href="transform-data-manipulation.html#further_reading_chapter12" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><a href="https://r4ds.had.co.nz/transform.html">Chapter 5: Data Transformation</a> of <em>R for Data Science</em> for a deeper breakdown of <code>dplyr</code> and it’s functionality.</li>
<li><a href="https://r4ds.had.co.nz/pipes.html">Chapter 18: Pipes</a> of <em>R for Data Science</em> for more information on pipes.</li>
<li><a href="https://tavareshugo.github.io/data_carpentry_extras/base-r_tidyverse_equivalents/base-r_tidyverse_equivalents.html">Syntax equivalents: base R vs Tidyverse</a> by Hugo Taveres for a comparison of base-R solutions to tidyverse. This entire book is largely biased towards tidyverse solutions, but there’s no denying that certain base-R can be more elegant. Check out this write up to get a better idea.</li>
</ul>
</div>
<div id="exercise-8" class="section level2 hasAnchor" number="12.9">
<h2><span class="header-section-number">12.9</span> Exercise<a href="transform-data-manipulation.html#exercise-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There is a set of exercises available for this chapter!</p>
<p><strong>Not sure how to access and work on the exercise Rmd files? </strong></p>
<ul>
<li><p>Refer to Chapter 3.3 for step-by-step instructions on accessing the exercises and working within the UofT JupyterHub’s RStudio environment.</p></li>
<li><p>Alternatively, if you’d like to simply access the individual files, you can download them directly from this <a href="https://github.com/UofTChem-Teaching/R4EnvChem-Exercises">repository</a>.</p></li>
</ul>
<p>Always remember to save your progress regularly and consult the textbook’s guidelines for submitting your completed exercises.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidying-your-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ggplot-basic-visualizations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/UofTChem-Teaching/R4EnvChem/edit/main/src/03-data-analysis-in-r/04-transform-1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/UofTChem-Teaching/R4EnvChem/blob/main/src/03-data-analysis-in-r/04-transform-1.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
