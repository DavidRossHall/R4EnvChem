# R Packages and Tidyverse

Before we do any real data work with R, now is the good time to introduce you to R packages. 

R, as a powerful programming language for statistics and data analysis, boasts a rich ecosystem of packages. In this chapter, we'll demystify what these packages are, their importance, and how to utilize them efficiently.

## What are R packages?

In a programming context, a package is akin to a toolbox. It contains sets of functions and data sets crafted to perform specific tasks, similar to how a toolbox contains various tools for different jobs. Instead of building every tool from scratch each time you need it, you can simply open your toolbox and grab the necessary instrument. In R, these tools come in the form of functions and data sets bundled inside packages.

Packages are previously written snippets of code that extend the capabilities of base R. Typically packages are created to address specific issues or workflows in different types of analysis.

#### Benefits of using packages:

-   **Efficiency**: Why reinvent the wheel? Packages save time by offering tried and tested functions for specific tasks.
-   **Community Support**: R packages often have a strong community of developers and users. This means frequent updates, thorough documentation, and a network of users to answer questions and offer support.
-   **Versatility**: The vast library of R packages means that you have tools at your disposal for almost every conceivable task or analysis.

## How to use R packages

### How to install packages

Before using a package, you must first install it. This is a one-time process unless you need to update the package to a newer version. To install a package, use the `install.packages()` function.

This book will make frequent use of a family of packages called the `tidyverse` (a popular collection of packages for data manipulation). These packages all share a common thought process and integrate naturally with one another. If you want to install the package named "tidyverse", you would use:

```{r, eval = FALSE}
# You can run this code in your R console as well. 
install.packages("tidyverse")
```

### How to load packages

You'll see a flurry of lines printed to the console indicating the status of the installation. Once installed you won't be able to use these functions until you load it with `library()`. For example, to load the `tidyverse` package:

```{r}
# You can run this code in your R console as well. 
library(tidyverse)
```

The output show's us which packages are included in the `tidyverse()` and their current version numbers, as well as conflicts (where functions from different packages share the same name). Don't worry about these for now.

After this, all the functions and data sets contained in the "tidyverse" package are available for you to use in your session. If you're ever uncertain about how to use a particular function, the R community and the package's documentation are excellent resources. For example, you can take a look at the official tidyverse documentation [here](https://tidyverse.tidyverse.org/).

### Calling specific functions

We've called functions like `ggplot()` and `read_csv()` from the `ggplot2` and `readr` packages, respectively. When we did so, they were implicitly imported when we called `library(tidyverse)`. What library does is import *all* of the functions within a package into the R workspace, so we can simply refer to them by name later on. Sometimes you'll want to be explicit to which function you call, as you can run into conflicts where different functions from different packages have the same name. Or you might not want to import the entire package when you only need to call one function. Either way, to explicitly call a function from a specific package you type the package name, followed by `::`, and the function name. I.e. We can use `read_csv()` without importing the `tidyverse`/`readr` packages by simply typing: `readr::read_csv()`. Note the package still needs to be installed on your computer for this to work.

## Tidyverse: The Golden Toolbox of R

We previously mentioned that `tidyverse` is a family of R packages designed for data science and deep data exploration. You will soon get into the chapters that extensively use tidyverse, but let's take a look at some of its noteworthy packages like `ggplot2`, `dplyr`, `tidyr`, and `readr`.

#### 1. ggplot2

[`ggplot2`](https://ggplot2.tidyverse.org/) is the go-to package for data visualization in R. Unlike base R graphics, ggplot2 allows you to build plots iteratively, adding layers of detail as you go.

```{r}
library(ggplot2)

# ggplot2 built-in dataset on fuel economy
data(mpg)

# draw a scatterplot
ggplot(mpg, aes(x=displ, y=hwy)) + geom_point()
```

#### 2. dpylr

[`dplyr`](https://dplyr.tidyverse.org/) provides verbs, or functions, to help you solve the most common data manipulation challenges. It's fast, intuitive, and the syntax is readable, making your code easier to write and understand.

```{r}
library(dplyr)

mpg %>%
  filter(class == "suv") %>%
  summarize(mean_hwy = mean(hwy))
```

**Code explanation** (Optional for now):

-   The `%>%` symbol (pipe operator) is a key part of tidyverse. The operator is used to pass an object into a function, allowing for sequential operations to be performed without the need for intermediate variables. For the example above, it's using the operator for data manipulation (filter and summarizing). The result of the left-hand side of the `%>%` is used as the first argument to the function on the right-hand side.

-   The `filter()` function is used to extract a subset of rows from a data frame based on logical conditions. It returns all rows where the condition is `TRUE`.

-   The `summarize()` function is used to create summary statistics for different variables. You provide named arguments where the name will be the name of a new column, and the value will be the summary statistic to compute.

#### 3. tidyr

[`tidyr`](https://tidyr.tidyverse.org/) ensures that your data is consistent with the tidy data principles. It offers functions to pivot data from wide to long formats and vice versa, and to deal with missing values.

#### 4. readr

[`readr`](https://readr.tidyverse.org/) provides functions to quickly and efficiently read rectangular data, including CSV and TSV files. Do you recall the R built-in function `read.csv()` to import a CSV file as a data frame? The alternative is to use the `read_csv()` (it looks very similar, right?) method that `readr` offers.
